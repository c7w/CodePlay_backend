{"version":3,"sources":["store.tsx","components/Creator/Creator.tsx","components/Creator/SketchList/SketchList.tsx","components/Explorer/Explorer.tsx","components/HistoryList/HistoryList.tsx","components/Creator/ColorEditor/WorkSpace/ColorButton.tsx","components/Creator/ColorEditor/WorkSpace/ColorSlider.tsx","components/Creator/ColorEditor/WorkSpace/ColorPicker.tsx","components/Creator/ColorEditor/ColorEditor.tsx","utils/MD5.js","utils/Network.tsx","components/Navbar/Navbar.tsx","components/Sidebar/Sidebar.tsx","components/MainPage/MainPage.tsx","index.tsx","Settings.tsx","utils/Color.tsx","components/Creator/ColorEditor/WorkSpace/Preview.tsx"],"names":["colorEditorSlice","createSlice","name","initialState","colorState","currColorIndex","reducers","updateColorState","state","action","payload","updateCurrColorIndex","colorPickerSlice","updatePickerState","creatorSlice","sketchId","updateSketchId","mainPageSlice","userInfo","loggedIn","student_id","fullname","email","role","schemeList","sketchList","exploreScheme","misc","sortStrategy","approved","page","updateMainPageState","actions","getColorState","colorEditor","getCurrColorIndex","getPickerState","colorPicker","getCreatorSketchId","creator","getMainPageState","mainPage","configureStore","reducer","Creator","props","useSelector","dispatch","useDispatch","useState","init","setInit","getInitColorValue","eval","JSON","parse","sketch","sketch_list","filter","id","defaultValue","map","list","RGB_","String2ArrayRGB","RGBList","fullList","RGB2HSV","useEffect","getSketch","data","className","sketch_id","initColorValue","onSubmit","style","marginTop","str","onClickSketch","scrollTo","ChooseSketch","setPage","rawList","newColorArray","scratch_num","length","row","Math","trunc","all_items","i","inside_arr","j","index","scratch_data","console","debug","push","placement","title","color","arrowPointAtCenter","margin","cursor","backgroundColor","borderRadius","padding","onClick","raw_str","color_arr","min","onChange","pageSize","parseInt","toString","defaultPageSize","total","Explorer","mainPageState","getExploreRawSvg","filtered","refreshExplore","getExploreScheme","then","resp","schemes","newScheme","floor","random","switchPage","refresh","vote","changeUserScheme","err","message","error","success","unvote","approve","newExploreScheme","stringify","like","liked","likes","next","edit","colors","download","color_num","my_color","color_saved","tmp","padStart","svg","replaceAll","urlObject","window","URL","webkitURL","export_blob","Blob","save_link","document","createElementNS","href","createObjectURL","obj","ev","createEvent","initMouseEvent","dispatchEvent","fakeClick","exportRaw","disabled","value","addonBefore","textAlign","autoSize","minRows","maxRows","description","userSelect","fontSize","display","justifyContent","alignItems","undefined","marginLeft","Piece","ifapproved","ifapprove","this","disapprove","setState","color_bind","tmp_str","color_str","opacity","select","ifhide","handler","icon","faCheckCircle","explore","author","pic_name","React","Component","HistoryList","currSketchId","arr_left","arr_right","s","getString","parjson","scheme","num","left_num","p","pic_class","show_select","mycolor","hidden","r","g","b","a","delete","shape","sort","flexGrow","ColorButton","boxShadow","selected","ColorSlider","colorGradient","propsString","span","max","step","trackStyle","railStyle","backgroundImage","ColorPicker","colorPickerState","setName","setDescription","colorOnChange","colorArrayBefore","colorArrayAfter","HSV2RGB","initColor","width","readOnly","ReloadOutlined","getRandomName","placeholder","allowClear","event","target","rows","type","htmlType","ColorEditor","setSketch","buttonList","Preview","newColorState","slice","MD5","string","RotateLeft","lValue","iShiftBits","AddUnsigned","lX","lY","lX4","lY4","lX8","lY8","lResult","FF","c","d","x","ac","y","z","F","GG","G","HH","H","II","I","WordToHex","lCount","WordToHexValue","WordToHexValue_temp","substr","k","AA","BB","CC","DD","Array","replace","utftext","n","charCodeAt","String","fromCharCode","Utf8Encode","lWordCount","lMessageLength","lNumberOfWords_temp1","lNumberOfWords","lWordArray","lBytePosition","lByteCount","ConvertToWordArray","toLowerCase","getSessionId","cookie","split","trim","indexOf","substring","promptToDesigner","key","md5","sessionId","log","parameter","urlbasic","WEB_URL","fetch","method","headers","body","json","status","operation","recordId","recordName","descrption","author_Id","sessionid","author_id","url","catch","sort_strategy","LoginOut","location","App","submit","isModalVisible","setIsModalVisible","setkey","faPencilRuler","size","info","visible","onOk","result","alert","onCancel","TopBar","align","ColorSchemePiece","color_array","marginBottom","MostLikedList","currLikedList","ApprovedList","approvedList","Text","Typography","Link","submittedIn30s","MainPage","config","maxCount","updatePage","setUpdatePage","changeSort","approvedOnly","currApprovedOnly","newMisc","exploreOperation","stateChangeFunction","color_List","setTimeout","centered","footer","fontWeight","ReactDOM","render","StrictMode","store","getElementById","colorValueListBak","R","B","S","V","h","f","q","t","parseFloat","toFixed","colorMax","getMax","colorMin","getMin","delta","colorHexString","dangerouslySetInnerHTML","__html"],"mappings":"8cAGMA,EAAmBC,YAAY,CACjCC,KAAM,cACNC,aAAc,CACVC,WAAY,CACR,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,GACnB,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,IAEvBC,eAAgB,GAEpBC,SAAU,CACNC,iBAAkB,SAACC,EAAOC,GACtBD,EAAMJ,WAAaK,EAAOC,SAE9BC,qBAAsB,SAACH,EAAOC,GAC1BD,EAAMH,eAAiBI,EAAOC,YAKpCE,EAAmBX,YAAY,CACjCC,KAAM,cACNC,aAAc,CACVC,WAAY,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,IAEnCE,SAAU,CACNO,kBAAmB,SAACL,EAAOC,GAAYD,EAAMJ,WAAaK,EAAOC,YAInEI,EAAeb,YAAY,CAC7BC,KAAM,UACNC,aAAc,CACVY,SAAU,GAEdT,SAAU,CACNU,eAAgB,SAACR,EAAOC,GAAYD,EAAMO,SAAWN,EAAOC,YAI9DO,EAAgBhB,YAAY,CAC9BC,KAAM,WACNC,aAAc,CACVK,MAAM,CACFU,SAAU,CACNC,UAAU,EACVC,WAAY,EACZlB,KAAM,GACNmB,SAAU,GACVC,MAAO,GACPC,KAAM,IAEVC,WAAY,CACR,QAAW,CACP,CACI,GAAM,GACN,gBAAmB,WACnB,UAAa,EACb,KAAQ,2BACR,YAAe,SACf,MAAS,EACT,UAAY,EACZ,OAAS,CACL,WAAc,WACd,KAAQ,MACR,SAAY,MACZ,MAAS,mCACT,KAAQ,YAEZ,QAAU,EACV,OAAS,CAAC,CAAC,IAAK,IAAK,GAAI,EAAG,GAAI,IAAM,KAC9B,CAAC,IAAK,GAAI,GAAI,EAAG,EAAG,IAAM,KAC1B,CAAC,GAAI,IAAK,IAAK,EAAG,IAAK,IAAM,KAC7B,CAAC,IAAK,IAAK,GAAI,EAAG,GAAI,IAAM,KACpC,OAAS,KAIrBC,WAAY,CACR,YAAc,CACV,CACI,GAAM,EACN,KAAQ,cACR,OAAU,EACV,KAAQ,69HACR,OAAU,QACV,aAAgB,mEAI5BC,cAAe,CAAC,GAAK,GAAG,gBAAkB,WAAW,UAAY,EAAE,KAAO,kBAAkB,YAAc,oBAAoB,MAAQ,GAAG,UAAW,EAAK,OAAS,CAAC,WAAa,WAAW,KAAO,OAAO,SAAW,wCAAU,MAAQ,4BAA4B,KAAO,YAAY,QAAS,EAAK,OAAS,wDAC5SC,KAAM,CACFC,aAAc,kBACdC,UAAU,GAEdC,KAAM,YAGdxB,SAAU,CACNyB,oBAAqB,SAACvB,EAAOC,GAAYD,EAAMA,MAAN,2BAAkBA,EAAMA,OAAUC,EAAOC,aAInF,EAAiDV,EAAiBgC,QAA3DzB,EAAP,EAAOA,iBAAkBI,EAAzB,EAAyBA,qBAClBE,EAAqBD,EAAiBoB,QAAtCnB,kBACAG,EAAkBF,EAAakB,QAA/BhB,eACAe,EAAuBd,EAAce,QAArCD,oBACDE,EAAgB,SAACzB,GAAgB,OAAOA,EAAM0B,YAAY9B,YAC1D+B,EAAoB,SAAC3B,GAAgB,OAAOA,EAAM0B,YAAY7B,gBAC9D+B,EAAiB,SAAC5B,GAAiB,OAAOA,EAAM6B,YAAYjC,YAC5DkC,EAAqB,SAAC9B,GAAiB,OAAOA,EAAM+B,QAAQxB,UAC5DyB,EAAmB,SAAChC,GAAgB,OAAOA,EAAMiC,SAASjC,OAGxDkC,gBAAe,CAC5BC,QAAS,CACPT,YAAalC,EAAiB2C,QAC9BN,YAAazB,EAAiB+B,QAC9BJ,QAASzB,EAAa6B,QACtBF,SAAUxB,EAAc0B,Y,s7BCnHtBC,QAAU,SAAVA,QAAWC,OAEb,IAAM9B,SAAW+B,mDAAYR,uCACvBlC,WAAa0C,mDAAYb,uCACzB5B,eAAiByC,mDAAYX,uCAC7BY,SAAWC,qDACjB,UAAwBC,oDAAS,GAAjC,qLAAOC,KAAP,cAAaC,QAAb,cAEMC,kBAAoB,SAApBA,kBAAqBrC,UACvB,OAAOsC,KAAKC,KAAKC,MAAMV,MAAMW,QAAQC,YAAYC,QAAO,SAACF,GAAe,OAAOA,EAAOG,KAAO5C,YAAW,GAAG6C,cAAcC,KAAI,SAACC,GAE9H,IAAMC,EAAOC,oDAAgBF,EAAK,IAC5BG,EAAU,CAAC,EAAE,EAAE,EAAEH,EAAK,GAAIC,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACjDG,EAAWC,oDAAQF,GACzB,MAAO,CACHC,EAAS,GACTA,EAAS,GACTA,EAAS,GACTA,EAAS,GACTA,EAAS,GACTA,EAAS,GACTA,EAAS,QAIjBE,sDAAU,WAENjB,QAAQD,KAAK,KACd,CAACnC,WAEJqD,sDAAU,WACNrB,SAASxC,8CAAiB6C,kBAAkBrC,YAC5CgC,SAASlC,8CAAkBT,WAAWC,oBACvC,CAACwC,MAAMW,SAEV,IAAMa,UAAY,WAAO,OAAOf,KAAKC,MAAMV,MAAMW,QAAQC,YAAYC,QAAO,SAACF,GAAe,OAAOA,EAAOG,KAAO5C,YAAW,GAAGuD,MAE/H,OACI,+HACI,kEAAKC,UAAU,cAAf,SACI,2DAAC,wDAAD,CACIf,OAAQa,YACRG,UAAWzD,SACX0D,eAAgBrB,kBAAkBrC,UAClC2D,SAAU7B,MAAM6B,aAExB,kEAAKH,UAAU,aAAaI,MAAO,CAACC,UAAW,QAA/C,SACI,2DAAC,sDAAD,CAAYC,IAAKhC,MAAMW,OAAQsB,cAAe,SAACnB,GAC3CZ,SAAS/B,8CAAe2C,IACxBZ,SAASxC,8CAAiB6C,kBAAkBO,KAE5CoB,SAAS,EAAG,YAQjBnC,+B,urCCvDToC,aAAe,SAAfA,aAAgBnC,OAqBd,IApBJ,cAAwBI,oDAAS,GAAjC,qLAAOnB,KAAP,cAAamD,QAAb,cACMxD,WAAaqB,mDAAYN,uCAAkBf,WAAWgC,YAExDyB,QAAUzD,WACVqC,KAAOoB,QAAQrB,KAAI,SAACL,QAChB,OAAOH,KAAKG,OAAOI,cAAcC,KAAI,SAACC,GAElC,IAAMqB,EAAgB,CAAC,IAAI,IAAI,IAAIrB,EAAK,GAAG,EAAE,EAAE,GAEzCG,EAAUD,oDAAgBF,EAAK,IAKrC,OAJAqB,EAAc,GAAKlB,EAAQ,GAC3BkB,EAAc,GAAKlB,EAAQ,GAC3BkB,EAAc,GAAKlB,EAAQ,GAEpBkB,QAGXC,YAActB,KAAKuB,OACnBC,IAAMC,KAAKC,MAAMJ,YAAc,GAAK,EACpCK,UAAY,GACPC,EAAI,EAAGA,EAAIJ,IAAKI,IAAI,CAEzB,IADA,IAAIC,WAAa,GADQ,eAEhBC,GACL,IAAIC,EAAY,EAAJH,EAAQE,EAChBE,EAAeZ,QAAQW,GAAOvB,KAClCyB,QAAQC,MAAMH,GACA,GAAT/D,KAAK,IAAS+D,GAASA,EAAe,EAAP/D,OAChCiE,QAAQC,MAAM,KACdL,WAAWM,KACP,2DAAC,oCAAD,CAASC,UAAU,QAAQC,MAAM,+DAAaC,MAAM,UAAUC,oBAAkB,EAAhF,SACI,kEAAK1B,MAAO,CAAC2B,OAAQ,OAAQC,OAAQ,UAAWC,gBAAiB,sBAAuBC,aAAc,OAAQC,QAAS,QAASC,QAAS,WAAO9D,MAAMiC,cAAcI,QAAQW,GAAOlC,KAAnL,SACI,2DAAC,8DAAD,CAASiD,QAASd,EAAce,UAAW/C,KAAK+B,YAT3DD,EAAI,EAAGA,GAAKL,KAAKuB,IAAI,EAAG1B,YAAkB,EAAJM,EAAQ,GAAIE,IAAK,MAAvDA,GAeTH,UAAUQ,KAAK,kEAAK1B,UAAW,UAAhB,SAA0CoB,YAAV,MAAMD,IAGzD,OACI,+HACG,kEAAKnB,UAAW,YAAhB,SAA8BkB,YAC7B,2DAAC,oCAAD,CAAYsB,SAAU,SAACjF,EAAMkF,GAAYjB,QAAQC,MAAMiB,WAAWxF,WAAW4D,OAAO,GAAK,GAAG6B,aAAcjC,QAASnD,IAAUqF,gBAAkB,EAAKC,MAAS3F,WAAW4D,aAOzKL,oC,0ECrEf,u6CAWMqC,SAAW,SAAXA,WAEF,IAAMC,cAAgBxE,mDAAYN,uCAC5BO,SAAWC,qDAEXuE,iBAAmB,WACrB,IAAM/C,EAAY8C,cAAc5F,cAAc8C,UACxCgD,EAAWF,cAAc7F,WAAWgC,YAAYC,QAAO,SAACF,GAAiB,OAAOA,EAAOG,KAAOa,KACpG,OAAwB,IAApBgD,EAASnC,OAAqB,GAC3BmC,EAAS,GAAGlD,MAKjBmD,eAAiB,WACnBC,uDAAiB,EAAG,mBAAmB,GAAOC,MAC1C,SAAAC,GAGI,IAAMpG,EAAaoG,EAAKC,QAGlBC,EAAYtG,EADE+D,KAAKwC,MAAMxC,KAAKyC,SAAWxG,EAAW6D,SAG1DtC,SAAShB,8CAAoB,CAACL,cAAeoG,SAOnDG,WAAa,SAACC,GACbA,GAAUT,iBACb1E,SAAShB,8CAAoB,CAACD,KAA6B,YAAvBwF,cAAcxF,KAAqB,UAAY,cAGjFqG,KAAO,WACTC,uDAAiB,OAAOd,cAAc5F,cAAciC,GAAG,GAAG,GAAG,GAAG2D,cAAcpG,SAASE,WAAW,GAAGuG,MACjG,SAACC,GACOA,EAAKS,IACLC,oCAAQC,MAAM,+BAEdD,oCAAQE,QAAQ,iCAM1BC,OAAS,WACXL,uDAAiB,SAASd,cAAc5F,cAAciC,GAAG,GAAG,GAAG,GAAG2D,cAAcpG,SAASE,WAAW,GAAGuG,MACnG,SAACC,GACOA,EAAKS,IACLC,oCAAQC,MAAM,2CAEdD,oCAAQE,QAAQ,6CAM1BE,QAAU,WACZ,GAAoC,aAAhCpB,cAAcpG,SAASK,KACvB,GAAG+F,cAAc5F,cAAcG,SAAU,CACrCuG,uDAAiB,aAAad,cAAc5F,cAAciC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAGgE,MAAK,WAAKW,oCAAQE,QAAQ,4CACtG,IAAMG,EAAmBrF,KAAKC,MAAMD,KAAKsF,UAAUtB,cAAc5F,gBACjEiH,EAAiB9G,UAAW,EAC5BkB,SAAShB,8CAAoB,CAACL,cAAeiH,SAC1C,CACHP,uDAAiB,UAAUd,cAAc5F,cAAciC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAGgE,MAAK,WAAKW,oCAAQE,QAAQ,gCACnG,IAAMG,EAAmBrF,KAAKC,MAAMD,KAAKsF,UAAUtB,cAAc5F,gBACjEiH,EAAiB9G,UAAW,EAC5BkB,SAAShB,8CAAoB,CAACL,cAAeiH,OAMzD,SAASE,OACL,GAAGvB,cAAc5F,cAAcoH,MAAM,CACjC,IAAMH,EAAmBrF,KAAKC,MAAMD,KAAKsF,UAAUtB,cAAc5F,gBACjEiH,EAAiBG,OAAQ,EACzBH,EAAiBI,OAAS,EAC1BhG,SAAShB,8CAAoB,CAACL,cAAeiH,KAC7CF,aACG,CACH,IAAME,EAAmBrF,KAAKC,MAAMD,KAAKsF,UAAUtB,cAAc5F,gBACjEiH,EAAiBG,OAAQ,EACzBH,EAAiBI,OAAS,EAC1BhG,SAAShB,8CAAoB,CAACL,cAAeiH,KAC7CR,QAMR,IAAMa,KAAO,WAAavB,kBAGpBwB,KAAO,SAAPA,OACFhB,YAAW,GACX,IAAMvG,cAAgB4F,cAAc5F,cAE9B8C,UAAY9C,cAAc8C,UAC1B4B,MAAQ/C,KAAK3B,cAAcwH,QACjCnD,QAAQC,MAAMI,OAGdrD,SAASpC,8CAAqB,IAC9BoC,SAASlC,8CAAkBuF,MAAM,KACjCrD,SAAS/B,8CAAewD,YACxBzB,SAASxC,8CAAiB6F,QAG1BrB,SAAS,EAAE,IAGToE,SAAW,WAiBb,IACIC,EADAC,EAAY/B,cAAc5F,cAAcwH,OAExCI,EAAc,GAElBF,EAAYC,EAAShE,OACrB,IAAK,IAAIK,EAAI,EAAGA,EAAI0D,EAAW1D,IAAI,CAC/B,IAAI6D,EAAMF,EAAS3D,GAAG,GAAGwB,SAAS,IAAIsC,SAAS,EAAG,KAClDD,GAAOF,EAAS3D,GAAG,GAAGwB,SAAS,IAAIsC,SAAS,EAAG,KAE/CD,EAAM,WADNA,GAAOF,EAAS3D,GAAG,GAAGwB,SAAS,IAAIsC,SAAS,EAAG,MAClB,IAE7BF,EAAYrD,KAAKsD,GAIrB,IADA,IAAIE,EAAMlC,mBACD7B,EAAI,EAAGA,GAAK0D,EAAW1D,IAAK,CACjC,IAAI6D,EAAM,KAAO7D,EAAEwB,WAAa,KAChCuC,EAAMA,EAAIC,WAAWH,EAAKD,EAAY5D,EAAE,KA1B5C,SAAmBxF,EAAWoE,GAC1B,IAAIqF,EAAYC,OAAOC,KAAOD,OAAOE,WAAaF,OAC9CG,EAAc,IAAIC,KAAK,CAAC1F,IACxB2F,EAAkBC,SAASC,gBAAgB,+BAAgC,KAC/EF,EAAUG,KAAOT,EAAUU,gBAAgBN,GAC3CE,EAAUd,SAAWjJ,EAXzB,SAAmBoK,GACf,IAAIC,EAAKL,SAASM,YAAY,eAC9BD,EAAGE,eAAe,SAAS,GAAM,EAAOb,OAAQ,EAAG,EAAG,EAAG,EAAG,GAAG,GAAO,GAAO,GAAO,EAAO,EAAG,MAC9FU,EAAII,cAAcH,GASlBI,CAAUV,GAuBdW,CAAUtD,cAAc5F,cAAcxB,KAAO,OAAQuJ,IAGzD,OAAQ,oEAAKlF,UAAW,WAAhB,UACJ,mEAAKA,UAAU,iBAAf,SACI,4DAAC,sEAAD,CAASqC,QAASW,mBAAoBV,UAAWS,cAAc5F,cAAcwH,WAEjF,oEAAK3E,UAAU,gBAAf,UACI,4DAAC,oCAAD,CACIsG,UAAQ,EACRC,MAAOxD,cAAc5F,cAAcxB,KACnC6K,YAAY,uCACZpG,MAAO,CAACqG,UAAW,SAAU5E,MAAO,WAGxC,4DAAC,+DAAD,CACI6E,SAAU,CAAEC,QAAS,EAAGC,QAAS,GACjCN,UAAQ,EACRC,MAAOxD,cAAc5F,cAAc0J,iBAG3C,oEAAK7G,UAAU,qBAAqBI,MAAO,CAAC0G,WAAY,QAAxD,UACI,mEAAK9G,UAAU,iBAAf,SACI,4DAAC,oCAAD,CAAS4B,MAAM,eAAf,SAAoB,4DAAC,iDAAD,CAChBxB,MAAO,CACH2G,SAAU,SACVlF,MAAOkB,cAAc5F,cAAcG,SAAW,QAAU,QAG5D8E,QAAS,WAAK+B,iBAGtB,oEAAKnE,UAAU,eAAeI,MAAO,CAAC4G,QAAS,OAAQC,eAAe,SAAUC,WAAW,UAA3F,UACI,4DAAC,oCAAD,CAAStF,MAAM,6CAAf,SAAyB,4DAAC,iDAAD,CACrBxB,MAAO,CACH2G,SAAU,SACVlF,MAAOkB,cAAc5F,cAAcoH,MAAQ,WAAQ4C,GAGvD/E,QAAS,WAAKkC,YAElB,oEAAMlE,MAAO,CAACgH,WAAY,SAAUL,SAAU,UAA9C,SAA0DhE,cAAc5F,cAAcqH,WAE1F,mEAAKxE,UAAU,mBAAf,SACI,4DAAC,oCAAD,CAAS4B,MAAM,yBAAf,SAAyB,4DAAC,kDAAD,CACrBxB,MAAO,CACH2G,SAAU,SACVlF,MAAO,SAGXO,QAAS,WAAKwC,kBAGtB,mEAAK5E,UAAU,eAAf,SACI,4DAAC,oCAAD,CAAS4B,MAAM,2BAAf,SAAsB,4DAAC,kDAAD,CAClBxB,MAAO,CACH2G,SAAU,SACVlF,MAAO,SAGXO,QAAS,WAAKsC,cAGtB,mEAAK1E,UAAU,eAAf,SACI,4DAAC,oCAAD,CAAS4B,MAAM,2BAAf,SAAsB,4DAAC,kDAAD,CAClBxB,MAAO,CACH2G,SAAU,SACVlF,MAAO,SAGXO,QAAS,WAAKqC,qBAQnB3B,gC,qpDC3MTuE,M,6UAEF,WAAY/I,GAAqB,IAAD,gLAC5B,cAAMA,IACDrC,MAAM,CAACqL,WAAWhJ,EAAMiJ,WAFD,E,0LAKhC,SAASA,EAAoBnI,GACrBmI,GACAC,KAAKlJ,MAAMmJ,WAAWrI,GACtBoI,KAAKE,SAAS,CAACJ,YAAW,MAG1BE,KAAKlJ,MAAM6F,QAAQ/E,GACnBoI,KAAKE,SAAS,CAACJ,YAAW,O,oBAIlC,WAEI,IAFO,IAAD,OACFK,EAAa,GACRxG,EAAI,EAAGA,EAAIqG,KAAKlJ,MAAMuG,UAAW1D,IAAK,CAC3C,IAAIyG,EAAU,QAAUJ,KAAKlJ,MAAMuJ,UAAU1G,GAAG,GAAK,IAAMqG,KAAKlJ,MAAMuJ,UAAU1G,GAAG,GAAK,IAAMqG,KAAKlJ,MAAMuJ,UAAU1G,GAAG,GAAK,IAAMqG,KAAKlJ,MAAMuJ,UAAU1G,GAAG,GAAK,IAC9JwG,EAAWjG,KAAK,mEAAK1B,UAAU,QAAQI,MAAO,CAAC6B,gBAAiB2F,EAASE,QAASN,KAAKlJ,MAAMuJ,UAAU1G,GAAG,OAE9G,OAAIqG,KAAKlJ,MAAMyJ,OACRP,KAAKlJ,MAAMiJ,WACNC,KAAKlJ,MAAM0J,OAEP,oEAAKhI,UAAW,QAAhB,UAKI,mEAAKA,UAAW,SAAUoC,QAAS,WAAK,EAAK6F,QAAQ,EAAKhM,MAAMqL,WAAY,EAAKhJ,MAAMc,KAAvF,SACI,4DAAC,8DAAD,CAAiB8I,KAAMC,iEAAe/H,MAAO,CAACyB,MAAM,aAExD,mEAAK7B,UAAU,aAAaoC,QAAS,WAAK,EAAK9D,MAAM8J,QAAQ,EAAK9J,MAAMc,KAAxE,SACKuI,IAEL,mEAAK3H,UAAU,SAAf,SAAyBwH,KAAKlJ,MAAM+J,SACpC,mEAAKrI,UAAU,WAAf,SAA2BwH,KAAKlJ,MAAMgK,gBAwB9Cd,KAAKlJ,MAAM0J,OAEP,oEAAKhI,UAAW,QAAhB,UAKI,mEAAKA,UAAW,SAAUoC,QAAS,WAAK,EAAK6F,QAAQ,EAAKhM,MAAMqL,WAAY,EAAKhJ,MAAMc,KAAvF,SACI,4DAAC,8DAAD,CAAiB8I,KAAMC,iEAAe/H,MAAO,CAACyB,MAAM,YAExD,mEAAK7B,UAAU,aAAaoC,QAAS,WAAK,EAAK9D,MAAM8J,QAAQ,EAAK9J,MAAMc,KAAxE,SACKuI,IAEL,mEAAK3H,UAAU,SAAf,SAAyBwH,KAAKlJ,MAAM+J,SACpC,mEAAKrI,UAAU,WAAf,SAA2BwH,KAAKlJ,MAAMgK,gBAyBlDd,KAAKlJ,MAAM0J,OAEP,oEAAKhI,UAAW,QAAhB,UAKI,mEAAKA,UAAW,SAAUoC,QAAS,WAAK,EAAK9D,MAAM6F,QAAQ,EAAK7F,MAAMc,OACtE,mEAAKY,UAAU,aAAaoC,QAAS,WAAK,EAAK9D,MAAM8J,QAAQ,EAAK9J,MAAMc,KAAxE,SACKuI,IAEL,mEAAK3H,UAAU,SAAf,SAAyBwH,KAAKlJ,MAAM+J,SACpC,mEAAKrI,UAAU,WAAf,SAA2BwH,KAAKlJ,MAAMgK,mB,GAnH1CC,6CAAMC,WA2IpBC,YAAc,SAAdA,YAAenK,OAEjB,IAAIoK,aAAenK,mDAAYR,wCAE3B4K,SAAW,GACPC,UAAY,GACZC,EAAIvK,MAAMwK,UAOd,GAAU,KAAND,EAAU,CACV,IAAIE,QAAUhK,KAAKC,MAAM6J,GACzBE,QAAQzF,QAAUyF,QAAQzF,QAAQnE,QAAO,SAAC6J,GAAe,OAAOA,EAAO/I,YAAcyI,gBAIrF,IAHA,IAAIO,IAAMF,QAAQzF,QAAQxC,OACtBoI,SAAWD,IAAMjI,KAAKC,MAAMgI,IAAM,GAE9B9H,EAAI,EAAGA,EAAI+H,SAAU/H,IAAI,CAY7B,IAXA,IAAIgI,EAAIJ,QAAQzF,QAAQnC,GACpB/B,GAAK+J,EAAE/J,GACPgK,UAAYD,EAAElJ,UACd8H,OAASzJ,MAAM+K,YACfC,QAAUxK,KAAKqK,EAAExE,QACjBE,UAAYyE,QAAQxI,OACpBuH,OAASc,EAAEd,OAAOvL,SAClBwL,SAAWa,EAAExN,KACbkM,UAAY,GACZN,UAAY4B,EAAE7L,SACd0K,OAASmB,EAAEI,OACPlI,EAAI,EAAGA,EAAIwD,UAAWxD,IAAI,CAC9B,IAAImI,EAAIF,QAAQjI,GAAG,GACfoI,EAAIH,QAAQjI,GAAG,GACfqI,EAAIJ,QAAQjI,GAAG,GACfsI,EAAIL,QAAQjI,GAAG,GACf2D,IAAM,CAACwE,EAAGC,EAAGC,EAAGC,GACpB9B,UAAUnG,KAAKsD,KAEnB2D,SAASjH,KAAK,4DAAC2F,MAAD,CAAOW,OAAQA,OAAQT,UAAWA,UAAWnI,GAAIA,GAAI2I,OAAQA,OAAQM,OAAQA,OAAQC,SAAUA,SAAUc,UAAWA,UAAWvE,UAAWA,UACnIgD,UAAWA,UAAWO,QAAS9J,MAAM8J,QAASwB,OAAQtL,MAAMsL,OAAQzF,QAAS7F,MAAM6F,QAASsD,WAAYnJ,MAAMmJ,cAGvI,IAAI,IAAItG,GAAI+H,SAAU/H,GAAI8H,IAAK9H,KAAI,CAY/B,IAXA,IAAIgI,GAAIJ,QAAQzF,QAAQnC,IACpB/B,IAAK+J,GAAE/J,GACPgK,WAAYD,GAAElJ,UACd8H,QAASzJ,MAAM+K,YACfC,SAAUxK,KAAKqK,GAAExE,QACjBE,WAAYyE,SAAQxI,OACpBuH,QAASc,GAAEd,OAAOvL,SAClBwL,UAAWa,GAAExN,KACbkM,WAAY,GACZN,WAAY4B,GAAE7L,SACd0K,QAASmB,GAAEI,OACPlI,GAAI,EAAGA,GAAIwD,WAAWxD,KAAI,CAC9B,IAAImI,GAAIF,SAAQjI,IAAG,GACfoI,GAAIH,SAAQjI,IAAG,GACfqI,GAAIJ,SAAQjI,IAAG,GACfsI,GAAIL,SAAQjI,IAAG,GACf2D,KAAM,CAACwE,GAAGC,GAAGC,GAAGC,IACpB9B,WAAUnG,KAAKsD,MAEnB4D,UAAUlH,KAAK,4DAAC2F,MAAD,CAAOW,OAAQA,QAAQT,UAAWA,WAAWnI,GAAIA,IAAI2I,OAAQA,QAAQM,OAAQA,QAAQC,SAAUA,UAAUc,UAAWA,WAAWvE,UAAWA,WACpIgD,UAAWA,WAAWO,QAAS9J,MAAM8J,QAASwB,OAAQtL,MAAMsL,OAAQzF,QAAS7F,MAAM6F,QAASsD,WAAYnJ,MAAMmJ,cAGvI,OACA,oEAAKzH,UAAW,eAAhB,UACI,oEAAKA,UAAW,gBAAhB,UACI,4DAAC,oCAAD,CAAQ6J,MAAO,QAAS7J,UAAW,eAAgBoC,QAAS,kBAAM9D,MAAMwL,KAAK,QAAQ,IAArF,sCACA,4DAAC,oCAAD,CAAQD,MAAO,QAAS7J,UAAW,eAAgBoC,QAAS,kBAAM9D,MAAMwL,KAAK,OAAO,IAApF,sCACA,4DAAC,oCAAD,CAAQD,MAAO,QAAS7J,UAAW,eAAgBoC,QAAS,kBAAM9D,MAAMwL,KAAK,iBAAiB,IAA9F,sCACA,mEAAK1J,MAAO,CAAC2J,SAAU,OACvB,4DAAC,oCAAD,CAAQF,MAAO,QAAS7J,UAAW,eAAgBoC,QAAS,WAAK9D,MAAMwL,KAAK,IAAI,IAAhF,+CAEJ,oEAAK9J,UAAW,YAAhB,UACI,oEAAKA,UAAW,YAAhB,UACI,oEAAKA,UAAW,QAAhB,UAGI,mEAAKA,UAAW,WAChB,mEAAKA,UAAU,aAAf,sCACA,mEAAKA,UAAU,SAAf,0BACA,mEAAKA,UAAU,WAAf,yCAEJ,4EACK2I,cAGT,oEAAK3I,UAAW,YAAhB,UACI,oEAAKA,UAAW,QAAhB,UAGI,mEAAKA,UAAW,WAChB,mEAAKA,UAAU,aAAf,sCACA,mEAAKA,UAAU,SAAf,0BACA,mEAAKA,UAAU,WAAf,yCAEJ,4EACK4I,qBAOjB,OAAO,0HAMJH,mC,mFCzRA,SAASuB,EAAa1L,GAMjC,OAAKA,EAAMuD,MAGP,qBAAK7B,UAAU,UAAUZ,GAAI,UAAYd,EAAMc,GAAGuD,WAAlD,SACI,cAAC,IAAD,CAAShB,UAAU,UAAUC,MAAM,yDAAYC,MAAM,UAAUC,oBAAkB,EAAjF,SACI,wBAAQ9B,UAAU,cACVZ,GAAI,SAAWd,EAAMc,GAAGuD,WACxBP,QAXA,WAChB9D,EAAM8D,QAAQ9D,EAAMc,KAWJgB,MAAO,CACH6B,gBAAiB,OAAS3D,EAAMuD,MAAM,GAAI,IAAMvD,EAAMuD,MAAM,GAAK,IAAMvD,EAAMuD,MAAM,GAAM,IACzFoI,UAAsB3L,EAAM4L,SACjB,gBAAkB5L,EAAMuD,MAAM,GAAI,IAAMvD,EAAMuD,MAAM,GAAK,IAAMvD,EAAMuD,MAAM,GAAM,IAC7E,UAZd,6B,+CCFd,SAASsI,EAAY7L,GAEhC,IAAMkE,EAAW,SAAC+D,GACVA,IACAA,EAAQ,GAEZjI,EAAMkE,SAASlE,EAAMc,GAAImH,IAGzB6D,EAAwB,GACxBC,EAAsB,GACtBvC,EAAkB,EACtB,OAAQxJ,EAAMc,IACV,KAAK,EACDgL,EAAgB,8GAChBC,EAAc,8CACd,MACJ,KAAK,EACDD,EAAgB,gDAChBC,EAAc,4CACd,MACJ,KAAK,EACDD,EAAgB,gDAChBC,EAAc,4CACd,MACJ,KAAK,EACDvC,EAAU,EACVuC,EAAc,4CACd,MACJ,KAAK,EACDD,EAAgB,8CAChBC,EAAc,8CACd,MACJ,KAAK,EACDD,EAAgB,gDAChBC,EAAc,8CACd,MACJ,KAAK,EACDD,EAAgB,+CAChBC,EAAc,8CAGtB,OACI,sBAAKrK,UAAU,aAAf,UACI,qBAAKA,UAAU,mBAAf,SACI,4BAAG,4BAAI1B,EAAMuI,kBAEjB,qBAAK7G,UAAU,cAAf,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAKsK,KAAM,GAAX,SACI,cAAC,IAAD,CAAS3I,UAAU,UAAUC,MAAM,+DAAaC,MAAM,UAAUC,oBAAkB,EAAlF,SACI,cAAC,IAAD,CACIS,IAAKjE,EAAMiE,IACXgI,IAAKjM,EAAMiM,IACX/H,SAAUA,EACVgI,KAAMlM,EAAMkM,KACZC,WAAY,CACR3C,QAASA,GAEb4C,UAAW,CACPC,gBAAiBP,GAErB7D,MAAOjI,EAAMiI,YAKzB,cAAC,IAAD,CAAK+D,KAAM,EAAX,SACI,cAAC,IAAD,CAAS3I,UAAU,UAAUC,MAAOyI,EAAaxI,MAAM,UAAUC,oBAAkB,EAAnF,SACI,cAAC,IAAD,CACIS,IAAKjE,EAAMiE,IACXgI,IAAKjM,EAAMiM,IACXnK,MAAO,CAAE2B,OAAQ,UACjBwE,MAAOjI,EAAMiI,MACb/D,SAAUA,gB,kFCuG3BoI,EAxKK,SAACtM,GAEjB,IAAMuM,EAAmBtM,YAAYV,KAC/BW,EAAWC,cACjB,EAAwBC,mBAAS,IAAjC,mBAAO/C,EAAP,KAAamP,EAAb,KACA,EAAsCpM,mBAAS,IAA/C,mBAAOmI,EAAP,KAAoBkE,EAApB,KAEMC,EAAgB,SAAC5L,EAAYmH,GAC/B,IAAM0E,EAAmB,CACvBJ,EAAiB,GACjBA,EAAiB,GACjBA,EAAiB,GACjBA,EAAiB,GACjBA,EAAiB,GACjBA,EAAiB,GACjBA,EAAiB,IAEnBI,EAAiB7L,GAAMmH,EACvB,IAAI2E,EAAkBD,EAClB7L,EAAK,EACL8L,EAAkBC,YAAQF,GAErB7L,EAAK,IACV8L,EAAkBtL,YAAQqL,IAE9B,IAAMrK,EAAgB,CACpBsK,EAAgB,GAChBA,EAAgB,GAChBA,EAAgB,GAChBA,EAAgB,GAChBA,EAAgB,GAChBA,EAAgB,GAChBA,EAAgB,IAGlB1M,EAASlC,YAAkBsE,IAC3BtC,EAAM0M,cAAcpK,IAU1B,OALEf,qBAAU,WACNrB,EAASlC,YAAkBgC,EAAM8M,cAClC,IAIH,sBAAKpL,UAAU,cAAf,UACE,sBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAU,KAAf,UACI,sBAAKA,UAAU,YAAf,UACI,cAACmK,EAAD,CACItD,YAAY,yBACZzH,GAAI,EACJoD,SAAUwI,EACVzE,MAAOsE,EAAiB,GACxBL,KAAM,IACNjI,IAAK,EACLgI,IAAK,IAET,cAACJ,EAAD,CACItD,YAAY,mBACZzH,GAAI,EACJoD,SAAUwI,EACVzE,MAAOsE,EAAiB,GACxBL,KAAM,IACNjI,IAAK,EACLgI,IAAK,IAET,cAACJ,EAAD,CACItD,YAAY,8BACZzH,GAAI,EACJoD,SAAUwI,EACVzE,MAAOsE,EAAiB,GACxBL,KAAM,IACNjI,IAAK,EACLgI,IAAK,OAGb,sBAAKvK,UAAU,aAAf,UACI,cAACmK,EAAD,CACItD,YAAY,mBACZzH,GAAI,EACJoD,SAAUwI,EACVzE,MAAOsE,EAAiB,GACxBL,KAAM,EACNjI,IAAK,EACLgI,IAAK,MAET,cAACJ,EAAD,CACItD,YAAY,mBACZzH,GAAI,EACJoD,SAAUwI,EACVzE,MAAOsE,EAAiB,GACxBL,KAAM,EACNjI,IAAK,EACLgI,IAAK,MAET,cAACJ,EAAD,CACItD,YAAY,mBACZzH,GAAI,EACJoD,SAAUwI,EACVzE,MAAOsE,EAAiB,GACxBL,KAAM,EACNjI,IAAK,EACLgI,IAAK,YAIjB,qBAAKvK,UAAU,OAAf,SACI,sBAAKA,UAAU,cAAf,UACI,cAACmK,EAAD,CACItD,YAAY,mBACZzH,GAAI,EACJoD,SAAUwI,EACVzE,MAAOsE,EAAiB,GACxBL,KAAM,EACNjI,IAAK,EACLgI,IAAK,MAET,qBAAKvK,UAAU,WAAf,SACI,kDAEJ,qBAAKA,UAAU,QAAf,SACI,cAAC,IAAD,CAAUI,MAAO,CAACiL,MAAO,OAAQ9E,MAAO,IAAMsE,EAAiB,GAAGlI,SAAS,IAAIsC,SAAS,EAAG,KAAO4F,EAAiB,GAAGlI,SAAS,IAAIsC,SAAS,EAAG,KAAO4F,EAAiB,GAAGlI,SAAS,IAAIsC,SAAS,EAAG,KAAMqG,UAAQ,cAKjO,sBAAKtL,UAAU,aAAf,UACE,oBAAGA,UAAU,WAAWI,MAAO,CAAC0G,WAAY,QAA5C,UACE,uEADF,oBAEI,cAAC,IAAD,CAASlF,MAAM,+DAAaC,MAAM,UAAUC,oBAAkB,EAA9D,SACE,cAACyJ,EAAA,EAAD,CAAgBnJ,QAAS,WAAKoJ,cAAgBpI,MAAK,SAACC,GAAcyH,EAAQzH,EAAK1H,iBAGrF,cAAC,IAAD,CACE8P,YAAY,0CACZC,YAAU,EACVnF,MAAO5K,EACP6G,SAAU,SAACmJ,GAAcb,EAAQa,EAAMC,OAAOrF,UAEhD,uBACA,uBACA,mBAAGvG,UAAU,WAAb,SACE,yEAEF,cAAC,IAAD,CACEyL,YAAY,iDACZI,KAAM,EACNH,YAAU,EACVnF,MAAOM,EACPrE,SAAU,SAACmJ,GAAcZ,EAAeY,EAAMC,OAAOrF,UAEvD,uBACA,uBACA,cAAC,IAAD,CACEuF,KAAK,UACLC,SAAS,SACT3J,QAAS,WAAK9D,EAAM6B,SAASxE,EAAMkL,IAHrC,iC,QC5GOmF,IArDK,SAAC1N,GAsBjB,IArBA,IAAME,EAAWC,cACjB,EAA4BC,mBAASJ,EAAMW,QAA3C,mBAAOA,EAAP,KAAegN,EAAf,KACMpQ,EAAa0C,YAAYb,KACzB5B,EAAiByC,YAAYX,KAC7B8K,EAAenK,YAAYR,KACjC,EAAwBW,mBAAS,GAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACMmE,EAAgBxE,YAAYN,KAa5BiO,EAAa,GACbpL,EAASxC,EAAM4B,eAAeY,OArBS,WAsBpCK,GACL+K,EAAWxK,KAAK,cAACsI,EAAD,CAA+B5K,GAAI+B,EAAGiB,QAAS,WAAK5D,EAASpC,YAAqB+E,KAAQU,MAAOhG,EAAWsF,GAAI+I,SAAUpO,IAAmBqF,GAA3H,UAAUA,KADvCA,EAAI,EAAGA,EAAIL,IAAUK,EAAI,EAAzBA,GAgBT,OAZAtB,qBAAU,WACNrB,EAASpC,YAAqB,IAC9B6P,EAAUlJ,EAAc7F,WAAWgC,YAAYC,QAAO,SAACF,GAAiB,OAAOA,EAAOG,KAAOsJ,KAAe,GAAG3I,MAC/GnB,EAAQD,EAAK,KACd,CAAC+J,IAEJ7I,qBAAU,WACNrB,EAASlC,YAAkBT,EAAWC,OACvC,CAACA,EAAgB6C,EAAM+J,IAE1B7I,qBAAU,cAAQ,CAACvB,EAAMW,SAGrB,qCACA,qBAAKe,UAAU,gBAAf,SACI,cAACmM,EAAA,EAAD,CAAS9J,QAASpD,EAAQqD,UAAWzG,MAEzC,qBAAKmE,UAAU,gBAAf,SAAgCkM,IAChC,qBAAKlM,UAAU,cAAf,SACI,cAAC,EAAD,CAAaoL,UAAWvP,EAAWC,GAAiBkP,cAjC3B,SAACpK,GAC9B,IAAMwL,EAAgBvQ,EAAWwQ,QACjCD,EAActQ,GAAkB8E,EAChCpC,EAASxC,YAAiBoQ,KA8BuEjM,SAAU,SAACxE,EAAckL,GAClHvI,EAAM6B,SAAS7B,EAAM2B,UAAWtE,EAAMkL,EAAahL,a,4SCmHpDyQ,EAnLH,SAAUC,GAClB,SAASC,EAAWC,EAAQC,GACxB,OAAQD,GAAQC,EAAeD,IAAU,GAAGC,EAEhD,SAASC,EAAYC,EAAGC,GACpB,IAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAMpB,OALAF,EAAY,WAALJ,EACPK,EAAY,WAALJ,EAGPK,GAAgB,WAALN,IAAuB,WAALC,IAF7BC,EAAY,WAALF,IACPG,EAAY,WAALF,GAGe,WAAVK,EAAuBF,EAAMC,EAErCH,EAAMC,EACQ,WAAVG,EACkB,WAAVA,EAAuBF,EAAMC,EAEnB,WAAVC,EAAuBF,EAAMC,EAGjCC,EAAUF,EAAMC,EAOhC,SAASE,EAAGxD,EAAED,EAAE0D,EAAEC,EAAEC,EAAEzE,EAAE0E,GAEpB,OADA5D,EAAIgD,EAAYhD,EAAGgD,EAAYA,EALnC,SAAWW,EAAEE,EAAEC,GAAK,OAAQH,EAAIE,GAAQF,EAAKG,EAKEC,CAAEhE,EAAG0D,EAAGC,GAAIC,GAAIC,IACpDZ,EAAYH,EAAW7C,EAAGd,GAAIa,GAEzC,SAASiE,EAAGhE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEzE,EAAE0E,GAEpB,OADA5D,EAAIgD,EAAYhD,EAAGgD,EAAYA,EARnC,SAAWW,EAAEE,EAAEC,GAAK,OAAQH,EAAIG,EAAMD,GAAMC,EAQGG,CAAElE,EAAG0D,EAAGC,GAAIC,GAAIC,IACpDZ,EAAYH,EAAW7C,EAAGd,GAAIa,GAEzC,SAASmE,EAAGlE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEzE,EAAE0E,GAEpB,OADA5D,EAAIgD,EAAYhD,EAAGgD,EAAYA,EAXnC,SAAWW,EAAEE,EAAEC,GAAK,OAAQH,EAAIE,EAAIC,EAWWK,CAAEpE,EAAG0D,EAAGC,GAAIC,GAAIC,IACpDZ,EAAYH,EAAW7C,EAAGd,GAAIa,GAEzC,SAASqE,EAAGpE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEzE,EAAE0E,GAEpB,OADA5D,EAAIgD,EAAYhD,EAAGgD,EAAYA,EAdnC,SAAWW,EAAEE,EAAEC,GAAK,OAAQD,GAAKF,GAAMG,GAcQO,CAAEtE,EAAG0D,EAAGC,GAAIC,GAAIC,IACpDZ,EAAYH,EAAW7C,EAAGd,GAAIa,GAwBzC,SAASuE,EAAUxB,GACf,IAAmDyB,EAA/CC,EAAe,GAAGC,EAAoB,GAC1C,IAAKF,EAAS,EAAEA,GAAQ,EAAEA,IAGtBC,IADAC,EAAsB,KADb3B,IAAiB,EAAPyB,EAAa,KACEvL,SAAS,KACW0L,OAAOD,EAAoBtN,OAAO,EAAE,GAE9F,OAAOqN,EAsBX,IACIG,EAAEC,EAAGC,EAAGC,EAAGC,EAAG/E,EAAED,EAAE0D,EAAEC,EADpBC,EAAEqB,QASN,IAHApC,EA1BA,SAAoBA,GAChBA,EAASA,EAAOqC,QAAQ,QAAQ,MAEhC,IADA,IAAIC,EAAU,GACLC,EAAI,EAAGA,EAAIvC,EAAOzL,OAAQgO,IAAK,CACpC,IAAI1B,EAAIb,EAAOwC,WAAWD,GACtB1B,EAAI,IACJyB,GAAWG,OAAOC,aAAa7B,GAE1BA,EAAI,KAASA,EAAI,MACtByB,GAAWG,OAAOC,aAAc7B,GAAK,EAAK,KAC1CyB,GAAWG,OAAOC,aAAkB,GAAJ7B,EAAU,OAG1CyB,GAAWG,OAAOC,aAAc7B,GAAK,GAAM,KAC3CyB,GAAWG,OAAOC,aAAe7B,GAAK,EAAK,GAAM,KACjDyB,GAAWG,OAAOC,aAAkB,GAAJ7B,EAAU,MAGlD,OAAOyB,EAQFK,CAAW3C,GACpBe,EA1DA,SAA4Bf,GASxB,IARA,IAAI4C,EACAC,EAAiB7C,EAAOzL,OACxBuO,EAAqBD,EAAiB,EAEtCE,EAA0C,KADpBD,EAAsBA,EAAuB,IAAK,GACjC,GACvCE,EAAWZ,MAAMW,EAAe,GAChCE,EAAgB,EAChBC,EAAa,EACTA,EAAaL,GAEjBI,EAAiBC,EAAa,EAAG,EACjCF,EAFAJ,GAAcM,EAAYA,EAAa,GAAI,GAEjBF,EAAWJ,GAAe5C,EAAOwC,WAAWU,IAAaD,EACnFC,IAOJ,OAJAD,EAAiBC,EAAa,EAAG,EACjCF,EAFAJ,GAAcM,EAAYA,EAAa,GAAI,GAElBF,EAAWJ,GAAe,KAAMK,EACzDD,EAAWD,EAAe,GAAKF,GAAgB,EAC/CG,EAAWD,EAAe,GAAKF,IAAiB,GACzCG,EAsCPG,CAAmBnD,GACvB5C,EAAI,WAAYD,EAAI,WAAY0D,EAAI,WAAYC,EAAI,UAC/CiB,EAAE,EAAEA,EAAEhB,EAAExM,OAAOwN,GAAG,GACnBC,EAAG5E,EAAG6E,EAAG9E,EAAG+E,EAAGrB,EAAGsB,EAAGrB,EACrB1D,EAAEwD,EAAGxD,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GATb,EASqB,YACzBjB,EAAEF,EAAGE,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GAVN,GAUc,YACzBlB,EAAED,EAAGC,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,GAXE,GAWM,WACzB5E,EAAEyD,EAAGzD,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GAZU,GAYF,YACzB3E,EAAEwD,EAAGxD,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GAbb,EAaqB,YACzBjB,EAAEF,EAAGE,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GAdN,GAcc,YACzBlB,EAAED,EAAGC,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,GAfE,GAeM,YACzB5E,EAAEyD,EAAGzD,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GAhBU,GAgBF,YACzB3E,EAAEwD,EAAGxD,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GAjBb,EAiBqB,YACzBjB,EAAEF,EAAGE,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GAlBN,GAkBc,YACzBlB,EAAED,EAAGC,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,IAnBE,GAmBM,YACzB5E,EAAEyD,EAAGzD,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,IApBU,GAoBF,YACzB3E,EAAEwD,EAAGxD,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,IArBb,EAqBqB,YACzBjB,EAAEF,EAAGE,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,IAtBN,GAsBc,YACzBlB,EAAED,EAAGC,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,IAvBE,GAuBM,YAEzB3E,EAAEgE,EAAGhE,EADLD,EAAEyD,EAAGzD,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,IAxBU,GAwBF,YAChBlB,EAAEC,EAAEC,EAAEgB,EAAE,GAxBb,EAwBqB,YACzBjB,EAAEM,EAAGN,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GAzBN,EAyBc,YACzBlB,EAAEO,EAAGP,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,IA1BE,GA0BM,WACzB5E,EAAEiE,EAAGjE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GA3BU,GA2BF,YACzB3E,EAAEgE,EAAGhE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GA5Bb,EA4BqB,YACzBjB,EAAEM,EAAGN,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,IA7BN,EA6Bc,UACzBlB,EAAEO,EAAGP,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,IA9BE,GA8BM,YACzB5E,EAAEiE,EAAGjE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GA/BU,GA+BF,YACzB3E,EAAEgE,EAAGhE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GAhCb,EAgCqB,WACzBjB,EAAEM,EAAGN,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,IAjCN,EAiCc,YACzBlB,EAAEO,EAAGP,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,GAlCE,GAkCM,YACzB5E,EAAEiE,EAAGjE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GAnCU,GAmCF,YACzB3E,EAAEgE,EAAGhE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,IApCb,EAoCqB,YACzBjB,EAAEM,EAAGN,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GArCN,EAqCc,YACzBlB,EAAEO,EAAGP,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,GAtCE,GAsCM,YAEzB3E,EAAEkE,EAAGlE,EADLD,EAAEiE,EAAGjE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,IAvCU,GAuCF,YAChBlB,EAAEC,EAAEC,EAAEgB,EAAE,GAvCb,EAuCqB,YACzBjB,EAAEQ,EAAGR,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GAxCN,GAwCc,YACzBlB,EAAES,EAAGT,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,IAzCE,GAyCM,YACzB5E,EAAEmE,EAAGnE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,IA1CU,GA0CF,YACzB3E,EAAEkE,EAAGlE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GA3Cb,EA2CqB,YACzBjB,EAAEQ,EAAGR,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GA5CN,GA4Cc,YACzBlB,EAAES,EAAGT,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,GA7CE,GA6CM,YACzB5E,EAAEmE,EAAGnE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,IA9CU,GA8CF,YACzB3E,EAAEkE,EAAGlE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,IA/Cb,EA+CqB,WACzBjB,EAAEQ,EAAGR,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GAhDN,GAgDc,YACzBlB,EAAES,EAAGT,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,GAjDE,GAiDM,YACzB5E,EAAEmE,EAAGnE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GAlDU,GAkDF,UACzB3E,EAAEkE,EAAGlE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GAnDb,EAmDqB,YACzBjB,EAAEQ,EAAGR,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,IApDN,GAoDc,YACzBlB,EAAES,EAAGT,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,IArDE,GAqDM,WAEzB3E,EAAEoE,EAAGpE,EADLD,EAAEmE,EAAGnE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GAtDU,GAsDF,YAChBlB,EAAEC,EAAEC,EAAEgB,EAAE,GAtDb,EAsDqB,YACzBjB,EAAEU,EAAGV,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GAvDN,GAuDc,YACzBlB,EAAEW,EAAGX,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,IAxDE,GAwDM,YACzB5E,EAAEqE,EAAGrE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GAzDU,GAyDF,YACzB3E,EAAEoE,EAAGpE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,IA1Db,EA0DqB,YACzBjB,EAAEU,EAAGV,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,GA3DN,GA2Dc,YACzBlB,EAAEW,EAAGX,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,IA5DE,GA4DM,YACzB5E,EAAEqE,EAAGrE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GA7DU,GA6DF,YACzB3E,EAAEoE,EAAGpE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GA9Db,EA8DqB,YACzBjB,EAAEU,EAAGV,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,IA/DN,GA+Dc,YACzBlB,EAAEW,EAAGX,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,GAhEE,GAgEM,YACzB5E,EAAEqE,EAAGrE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,IAjEU,GAiEF,YACzB3E,EAAEoE,EAAGpE,EAAED,EAAE0D,EAAEC,EAAEC,EAAEgB,EAAE,GAlEb,EAkEqB,YACzBjB,EAAEU,EAAGV,EAAE1D,EAAED,EAAE0D,EAAEE,EAAEgB,EAAE,IAnEN,GAmEc,YACzBlB,EAAEW,EAAGX,EAAEC,EAAE1D,EAAED,EAAE4D,EAAEgB,EAAE,GApEE,GAoEM,WACzB5E,EAAEqE,EAAGrE,EAAE0D,EAAEC,EAAE1D,EAAE2D,EAAEgB,EAAE,GArEU,GAqEF,YACzB3E,EAAEgD,EAAYhD,EAAE4E,GAChB7E,EAAEiD,EAAYjD,EAAE8E,GAChBpB,EAAET,EAAYS,EAAEqB,GAChBpB,EAAEV,EAAYU,EAAEqB,GAGpB,OADWT,EAAUtE,GAAGsE,EAAUvE,GAAGuE,EAAUb,GAAGa,EAAUZ,IAChDsC,eC3KhB,SAASC,IAIL,IAFA,IACIC,EAAgBlK,SAASkK,OAAOC,MAAM,KAClC3O,EAAE,EAAEA,EAAE0O,EAAO/O,OAAOK,IAAI,CAC5B,IAAIiM,EAAEyC,EAAO1O,GAAG4O,OAChB,GAA4B,IAAzB3C,EAAE4C,QAAQ,aAAkB,OAAO5C,EAAE6C,UAJ9B,aAIkDnP,OAAOsM,EAAEtM,QAEzE,MAAO,GAIX,SAASoP,EAAiBC,GACtB,IAAIC,EAAc9D,EAAI6D,GAClBE,EAAYT,IAChBpO,QAAQ8O,IAAIF,GAEZ,IAAIG,EAAoBxR,KAAKsF,UAAU,CAAEgM,UAAWA,EAAWF,IAAKC,IAEpE5O,QAAQ8O,IAAIC,GACZ,IAAIC,EAAWC,IAkBf,OAfaC,MAFKF,EAAW,gBAEL,CACpBG,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMN,IACPnN,MAAK,SAACrD,GACL,OAAOA,EAAK+Q,UACb1N,MAAK,SAAC0N,GACL,MAAoB,4BAAhBA,EAAKC,UAsBjB,SAASlN,EAAiBmN,EAAiBC,EAAgBpP,EAAiBqP,EAAkBC,EAAkBC,EAAiBnR,GAC7H,IAAIoR,EAAUzB,IAEViB,EAAK9R,KAAKsF,UACV,CACI2M,UAAUA,EACVX,UAAUgB,EACVjS,GAAG6R,EACHtM,OAAO9C,EACPlG,KAAKuV,EACLrK,YAAYsK,EACZG,UAAUF,EACVnR,UAAUA,IAGlBuB,QAAQ8O,IAAIO,GAEZ,IAAIU,EAAId,IAAQ,kBAYhB,OAXWC,MAAMa,EAAI,CACjBZ,OAAQ,OACRC,QAAS,CACL,eAAgB,oBAEpBC,KAAMA,IACPzN,MACC,SAAAC,GACI,OAAOA,EAAKyN,UAElBU,OAAM,WAA+B,OAA1BzN,IAAQC,MAAM,yCAAmB,MAKlD,SAASb,EAAiBlD,EAAiBwR,EAAqBnU,GAC5D,IAAI+T,EAAUzB,IAQV2B,EAAId,IAAQ,qBAUhB,OATAc,EAAIA,EAAI,cAAcF,EAAU,cAAcpR,EAAU,kBAAkBwR,EACvEnU,IACCiU,GAAQ,eAEDb,MAAMa,GAAKnO,MAClB,SAAAC,GACI,OAAOA,EAAKyN,UAElBU,OAAM,WAA+B,OAA1BzN,IAAQC,MAAM,yCAAmB,MAKlD,SAASlE,IACL,IAAIyR,EAAId,IAAQ,cAMhB,OALWC,MAAMa,GAAKnO,MAClB,SAAAC,GACI,OAAOA,EAAKyN,UAElBU,OAAM,WAA+B,OAA1BzN,IAAQC,MAAM,yCAAmB,MAIlD,IAAMwH,EAAgB,WAClB,IAAI+F,EAAId,IAAQ,kBAMhB,OALWC,MAAMa,GAAKnO,MAClB,SAAAC,GACI,OAAOA,EAAKyN,UAElBU,OAAM,WAA+B,OAA1BzN,IAAQC,MAAM,yCAAmB,CAAC,KAAQ,S,sXC/G3D,SAAS0N,IACLrM,OAAOsM,SAAS9L,KAAO,WAQ3B,IAAM+L,EAAM,SAACtT,GACT,IAAItB,EAAYsB,EAAMtB,KAClB6U,EAAwCvT,EAAMuT,OAClD,EAA4CnT,oBAAS,GAArD,mBAAOoT,EAAP,KAAuBC,EAAvB,KACA,EAAmBrT,qBAAnB,mBAAOyR,EAAP,KAAW6B,EAAX,KA+BA,OACI,qCACI,cAAC,IAAD,CAASrQ,UAAU,UAAUC,MAAM,mDAAWC,MAAM,UAAUC,oBAAkB,EAAhF,SACI,cAAC,IAAD,CAAiB9B,UAAU,WAAWkI,KAAO+J,IAAgBC,KAAM,KAAM9P,QAhCnE,WACJ,aAAPpF,EAIH+U,GAAkB,GAHdhO,IAAQoO,KAAK,+DAiCb,eAAC,IAAD,CAAOvQ,MAAM,6CAAUwQ,QAASN,EAAgBO,KA3BvC,WACVlC,GACC0B,EAAO1B,GAAK/M,MAAK,SAAAkP,GACTA,EAIAP,GAAkB,GAHlBQ,MAAM,sCAuBkDC,SAdnD,WACjBT,GAAkB,IAad,UACI,iFACA,cAAC,IAAD,CAAOtG,YAAY,cAAcrM,GAAG,UAAUmH,MAAO4J,EAAK3N,SAAU,SAAAmJ,GAZ9D,IAACpF,IAYiFoF,EAAMC,OAAOrF,MAX7GyL,EAAOzL,aAmEAkM,EAhDA,SAACnU,GAEUC,YAAYN,KAIlC,OACI,sBAAK+B,UAAU,SAAf,UACI,qBAAKA,UAAU,OAAf,SACI,sBAAKA,UAAU,UAAf,UACI,+CAAkB,UAClB,sBAAKA,UAAU,WAAf,uBAAqC,UACrC,6CAAgB,UAChB,+BAAO1B,EAAM3C,YAGrB,qBAAKqE,UAAU,QAAf,SACI,eAAC,IAAD,CAAO0S,MAAM,SAASR,KAAM,IAA5B,UACA,cAAC,EAAD,CAAKlV,KAAMsB,EAAMtB,KAAM6U,OAAQvT,EAAM4R,mBACrC,qBAAKlQ,UAAU,SAAf,SACI,sBAAMoC,QAASsP,EAAf,iDCzFdiB,G,OAAmB,SAACrU,GAElB,IADJ,IAAIqJ,EAAa,GACJxG,EAAI,EAAGA,EAAI7C,EAAMsU,YAAY9R,OAAQK,IAAK,CAC/C,IAAIyG,EAAU,QAAUtJ,EAAMsU,YAAYzR,GAAG,GAAK,IAAM7C,EAAMsU,YAAYzR,GAAG,GAAK,IAAM7C,EAAMsU,YAAYzR,GAAG,GAAK,IAAM7C,EAAMsU,YAAYzR,GAAG,GAAK,IAClJwG,EAAWjG,KAAK,qBAAK1B,UAAU,QAAQI,MAAO,CAAC6B,gBAAiB2F,EAASE,QAASxJ,EAAMsU,YAAYzR,GAAG,GAAI0R,aAAc,aAEjI,OACI,qBAAK7S,UAAU,aAAaoC,QAAS,WAAK9D,EAAM8J,QAAQ9J,EAAMc,KAA9D,SACKuI,MASPmL,EAAgB,SAACxU,GACnB,IAAMyE,EAAgBxE,YAAYN,KAC5ByK,EAAenK,YAAYR,KAC3BgV,EAAgBhQ,EAAc9F,WAAWqG,QACdnE,QAAO,SAAC6J,GAAD,OAAiBA,EAAO/I,YAAcyI,KAC7CoB,MAAK,SAACH,EAAQD,GAAT,OAAoBC,EAAEnF,MAAQkF,EAAElF,SACrC6H,MAAM,EAAG,IACT/M,KAAI,SAAC0J,GAAiB,OAAO,cAAC,EAAD,CAAkB5J,GAAI4J,EAAO5J,GAAIwT,YAAa5J,EAAOrE,OAAQyD,QAAS9J,EAAM8J,aAG1I,OAAQ,8BAAM2K,KAGZC,EAAe,SAAC1U,GAClB,IAAMyE,EAAgBxE,YAAYN,KAC5ByK,EAAenK,YAAYR,KAC3BkV,EAAelQ,EAAc9F,WAAWqG,QACbnE,QAAO,SAAC6J,GAAD,OAAiBA,EAAO/I,YAAcyI,KAC7CvJ,QAAO,SAAC6J,GAAD,OAAiBA,EAAO1L,YAC/BwM,MAAK,SAACH,EAAQD,GAAT,OAAoBC,EAAEnF,MAAQkF,EAAElF,SACrC6H,MAAM,EAAG,IACT/M,KAAI,SAAC0J,GAAiB,OAAO,cAAC,EAAD,CAAkB5J,GAAI4J,EAAO5J,GAAIwT,YAAa5J,EAAOrE,OAAQyD,QAAS9J,EAAM8J,aAC1I,OAAQ,8BAAM6K,K,SChCVC,EAAeC,IAAfD,KAAME,EAASD,IAATC,KAGVC,GAAiB,EA+PNC,EA7PE,WAEbvP,IAAQwP,OAAO,CACXC,SAAU,IAGd,IAAMzQ,EAAgBxE,YAAYN,KAC5BO,EAAWC,cACjB,EAAoCC,mBAAS,GAA7C,mBAAO+U,EAAP,KAAmBC,EAAnB,KAKMC,EAAa,SAAC7H,GAA6C,IAA/B8H,EAA8B,wDAEtDC,EAAmB9Q,EAAc3F,KAAKE,SACxCsW,EAEAzQ,YAAiB,EAAEJ,EAAc3F,KAAKC,cAAcwW,GAAkBzQ,MAClE,SAAAC,GACI,IAAMyQ,EAAU/U,KAAKC,MAAMD,KAAKsF,UAAUtB,EAAc3F,OACxD0W,EAAQxW,UAAYuW,EACpBrV,EAAShB,YAAoB,CAACJ,KAAM0W,EAAS7W,WAAYoG,QAIjEF,YAAiB,EAAE2I,EAAK+H,GAAkBzQ,MACtC,SAAAC,GACI,IAAMyQ,EAAU/U,KAAKC,MAAMD,KAAKsF,UAAUtB,EAAc3F,OACxD0W,EAAQzW,aAAeyO,EACvBtN,EAAShB,YAAoB,CAACJ,KAAM0W,EAAS7W,WAAYoG,SAmEnE0Q,EAAmB,SAAC3U,GACtB,IACM6D,EADaF,EAAc9F,WAAWqG,QAChBnE,QAAO,SAAC6J,GAAiB,OAAOA,EAAO5J,KAAKA,KAChD,IAApB6D,EAASnC,SAGbtC,EAAShB,YAAoB,CAACL,cAAe8F,EAAS,MACtDS,GAAW,KAyBTA,EAAa,SAACC,GACbA,GAnBHR,YAAiB,EAAG,mBAAmB,GAAOC,MAC1C,SAAAC,GAGI,IAAMpG,EAAaoG,EAAKC,QAGlBC,EAAYtG,EADE+D,KAAKwC,MAAMxC,KAAKyC,SAAWxG,EAAW6D,SAG1DtC,EAAShB,YAAoB,CAACL,cAAeoG,QAWrD/E,EAAShB,YAAoB,CAACD,KAA6B,YAAvBwF,EAAcxF,KAAqB,UAAY,cAmDvF,OA/CAsC,qBAAU,WACN2B,QAAQC,MAAM,oFACdiP,MAAMD,IAAU,2BAA6Bb,eAAiBxM,MAAK,SAAAC,GAAI,OAAGA,EAAKyN,UAAQ1N,MACnF,SAAA0N,GAEI,IAAGA,EAAKhN,IAAR,CAIA,IAAMnH,EAAW,CACbC,UAAU,EACVC,WAAYiU,EAAKjU,WACjBlB,KAAMmV,EAAKnV,KACXmB,SAAUgU,EAAKhU,SACfC,MAAO+T,EAAK/T,MACZC,KAAM8T,EAAK9T,MAEfwB,EAAShB,YAAoB,CAACb,cAK9BwG,YAAiB,EAAE,mBAAkB,GAAOC,MACxC,SAAAC,GACI7E,EAAShB,YAAoB,CAACP,WAAYoG,EAAMlG,cAAekG,EAAKC,QAAQxC,OAAS,EAAIuC,EAAKC,QAAQ,QAAK6D,QAYnHrH,cAAYsD,MAAK,SAAAC,GACb7E,EAAShB,YAAoB,CAACN,WAAYmG,YAGpDmO,OAAM,WAA+B,OAA1BzN,IAAQC,MAAM,yCAAmB,QAC/C,IAEHnE,qBAAU,WACN6T,EAAcD,EAAW,KAC1B,CAAC1Q,IAGA,iCACI,qBAAK/C,UAAU,SAAf,SACI,sBAAKA,UAAU,WAAf,UACI,+BAAM,2DACN,cAAC,EAAD,CAAcoI,QAAS2L,SAI/B,qBAAK/T,UAAU,UAAf,SACI,sBAAKA,UAAU,aAAf,UACI,+BAAM,2DACN,cAAC,EAAD,CAAeoI,QAAS2L,SAIhC,cAAC,EAAD,CACEpY,KAAMoH,EAAcpG,SAAShB,KAC7BqB,KAAM+F,EAAcpG,SAASK,KAC7BgX,oBAAqBtQ,EACrBwM,iBAAkBA,MAEpB,cAAC,IAAD,UACI,eAAC,UAAD,CAAS9P,MAAO,CAAE2B,OAAQ,aAA1B,UACI,sBAAK/B,UAAU,UAAf,UACI,cAAC3B,EAAA,EAAD,CACIY,OAAQF,KAAKsF,UAAUtB,EAAc7F,YACrCiD,SA1IH,SAACF,EAAiBtE,EAAYkL,EAAmBoN,GACtD,KAATtY,EACA0X,EACCtP,IAAQoO,KAAK,kFAEbtO,YAAiB,SAAS,EAAEoQ,EAAWtY,EAAKkL,EAAY9D,EAAcpG,SAASE,WAAWoD,GAAWmD,MACjG,SAACC,GACmB,YAAbA,EAAKS,IACJC,IAAQC,MAAM,+FACM,oBAAbX,EAAKS,IACZC,IAAQC,MAAM,4DAEdD,IAAQoO,KAAK,4BACbwB,EAAW5Q,EAAc3F,KAAKC,cAC9BgW,GAAiB,EACjBa,YAAW,WACPb,GAAiB,IACnB,SAhBAtP,IAAQC,MAAM,8DA2IhB,cAACyE,EAAA,EAAD,CACIhB,WArJI,SAACrI,GACW,SAAhC2D,EAAcpG,SAASK,MAC3B6G,YAAiB,aAAazE,EAAG,GAAG,GAAG,GAAG,GAAG,GAAGgE,MAC5C,SAAAC,GAAOsQ,EAAW5Q,EAAc3F,KAAKC,kBAmJrByM,KAAM6J,EACN7K,UAAW/J,KAAKsF,UAAUtB,EAAc9F,YACxCoM,YAA6C,aAAhCtG,EAAcpG,SAASK,KACpCmH,QAjKC,SAAC/E,GACc,SAAhC2D,EAAcpG,SAASK,MAC3B6G,YAAiB,UAAUzE,EAAG,GAAG,GAAG,GAAG,GAAG,GAAGgE,MACzC,SAAAC,GAAOsQ,EAAW5Q,EAAc3F,KAAKC,kBA+JrBuM,OAzKH,SAACxK,GAClByE,YAAiB,SAASzE,EAAG,GAAG,GAAG,GAAG,GAAG,GAAGgE,MACxC,SAAAC,GAAOsQ,EAAW5Q,EAAc3F,KAAKC,kBAwKrB+K,QAAS2L,OAIjB,qBAAK/T,UAAU,UAAf,SACI,cAAC,IAAD,CACI4B,MAAOmB,EAAc5F,cAAcxB,KACnCwY,UAAQ,EACR/B,QAAgC,YAAvBrP,EAAcxF,KACvBiV,SAAU,WACN9O,GAAW,IAEf0Q,OAAQ,KAPZ,SASI,cAACtR,EAAA,EAAD,aAYhB,eAAC,SAAD,CAAQ1C,MAAO,CAACqG,UAAW,UAA3B,UACI,eAACyM,EAAD,WAAM,sBAAM9S,MAAO,CAACiU,WAAY,QAA1B,uBAAN,8BAAoF,cAACjB,EAAD,CAAMvN,KAAK,8BAA8B+F,OAAO,SAAhD,iBAApF,oBADJ,IACiL,uBAC7K,eAACsH,EAAD,WAAM,sBAAM9S,MAAO,CAACiU,WAAY,QAA1B,4BAAN,+CCtQhBC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUC,MAAOA,IAAjB,SACE,cAAC,EAAD,QAGJ9O,SAAS+O,eAAe,U,gCCb1B,kCAIA,IAAMjE,EAAU,wB,gCCJhB,sGACA,IAAMtF,EAAU,SAACwJ,GAEb,IAAIC,EAAYD,EAAkB,GAAG,IAAK/G,EAAY+G,EAAkB,GAAG,IAAKE,EAAYF,EAAkB,GAAG,IAC7G7G,EAAY6G,EAAkB,GAAIG,EAAYH,EAAkB,GAAII,EAAYJ,EAAkB,GAClGK,EAAYhU,KAAKwC,MAAMsK,EAAI,IAC3BmH,EAAYnH,EAAI,GAAKkH,EAAG7L,EAAI4L,GAAK,EAAID,GAAII,EAAIH,GAAK,EAAIE,EAAIH,GAAIK,EAAIJ,GAAK,GAAK,EAAIE,GAAKH,GACzF,OAAQE,GACJ,KAAK,EACDJ,EAAIG,EAAGnH,EAAIuH,EAAGN,EAAI1L,EAClB,MACJ,KAAK,EACDyL,EAAIM,EAAGtH,EAAImH,EAAGF,EAAI1L,EAClB,MACJ,KAAK,EACDyL,EAAIzL,EAAGyE,EAAImH,EAAGF,EAAIM,EAClB,MACJ,KAAK,EACDP,EAAIzL,EAAGyE,EAAIsH,EAAGL,EAAIE,EAClB,MACJ,KAAK,EACDH,EAAIO,EAAGvH,EAAIzE,EAAG0L,EAAIE,EAClB,MACJ,KAAK,EACDH,EAAIG,EAAGnH,EAAIzE,EAAG0L,EAAIK,EAa1B,OATAN,GAAK,IAAKhH,GAAK,IAAKiH,GAAK,IAEzBF,EAAkB,GAAKS,WAAWR,EAAES,QAAQ,IAC5CV,EAAkB,GAAKS,WAAWxH,EAAEyH,QAAQ,IAC5CV,EAAkB,GAAKS,WAAWP,EAAEQ,QAAQ,IAKrCV,GAGL/U,EAAU,SAAC+U,GAEb,IAAsCG,EAAWC,EAA7CjH,EAAY6G,EAAkB,GAC9BC,EAAYD,EAAkB,GAAG,IAAK/G,EAAY+G,EAAkB,GAAG,IAAKE,EAAYF,EAAkB,GAAG,IAC7GW,EAAWC,EAAOX,EAAGhH,EAAGiH,GAAIW,EAAWC,EAAOb,EAAGhH,EAAGiH,GAAIa,EAAQJ,EAAWE,EA8B/E,OA5Bc,IAAVE,EACA5H,EAAI,EAECwH,IAAaV,GAAKhH,GAAKiH,EAC5B/G,GAAWF,EAAIiH,GAAKa,EAAhB,GAECJ,IAAaV,GAAKhH,EAAIiH,EAC3B/G,GAAWF,EAAIiH,GAAKa,EAAhB,GAAyB,IAExBJ,IAAa1H,EAClBE,GAAW+G,EAAID,GAAKc,EAAhB,GAAyB,IAExBJ,IAAaT,IAClB/G,GAAW8G,EAAIhH,GAAK8H,EAAhB,GAAyB,KAGjCX,EAAIO,EAEJR,EAAkB,IAAbQ,EAAkB,EAAK,EAAIE,EAAWF,EAG3CX,EAAkB,GAAKS,WAAWtH,EAAEuH,QAAQ,IAC5CV,EAAkB,GAAKS,WAAWN,EAAEO,QAAQ,IAC5CV,EAAkB,GAAKS,WAAWL,EAAEM,QAAQ,IAKrCV,GAGLY,EAAS,SAAC5L,EAAWD,EAAW0D,GAClC,IAAI7C,EAAMZ,EAKV,OAJGY,EAAMb,IACLa,EAAMb,GACPa,EAAM6C,IACL7C,EAAM6C,GACH7C,GAGLkL,EAAS,SAAC9L,EAAWD,EAAW0D,GAClC,IAAI7K,EAAMoH,EAKV,OAJGpH,EAAMmH,IACLnH,EAAMmH,GACPnH,EAAM6K,IACL7K,EAAM6K,GACH7K,GAGL9C,EAAkB,SAACkW,GAErB,MAAO,CADCjT,SAASiT,EAAe1F,UAAU,EAAG,GAAI,IAASvN,SAASiT,EAAe1F,UAAU,EAAG,GAAI,IAASvN,SAASiT,EAAe1F,UAAU,EAAG,GAAI,O,+FCxFnJ9D,E,4JACF,WACI,IAAIpH,EAAc,GAClBA,EAAYrD,KAAK,IACjB,IACImD,EADAC,EAAW0C,KAAKlJ,MAAMgE,UAG1BuC,EAAYC,EAAShE,OACrB,IAAK,IAAIK,EAAI,EAAGA,EAAI0D,EAAW1D,IAAI,CAC/B,IAAI6D,EAAM,QAAUF,EAAS3D,GAAG,GAAK,IAAM2D,EAAS3D,GAAG,GAAK,IAAM2D,EAAS3D,GAAG,GAAK,IAAM2D,EAAS3D,GAAG,GAAK,IAC1G6D,EAAM,SAAgBA,EAAM,aAAeF,EAAS3D,GAAG,GACvD4D,EAAYrD,KAAKsD,GAIrB,IADA,IAAI6D,EAAIrB,KAAKlJ,MAAM+D,QACVlB,EAAI,EAAGA,GAAK0D,EAAW1D,IAAK,CACjC,IAAI6D,EAAM,KAAO7D,EAAEwB,WAAa,KAChCkG,EAAIA,EAAE1D,WAAWH,EAAKD,EAAY5D,IAGtC,OAEI,qBAAKnB,UAAW,cAAhB,SACI,qBAAKI,MAAO,CAAC4G,QAAS,OAAQC,eAAe,UAAW2O,wBAAyB,CAACC,OAAQhN,W,GAvBpFN,IAAMC,WA8Bb2D,Q","file":"static/js/main.ecf03467.chunk.js","sourcesContent":["import { configureStore, createSlice } from '@reduxjs/toolkit';\r\n\r\n\r\nconst colorEditorSlice = createSlice({\r\n    name: 'ColorEditor',\r\n    initialState: {\r\n        colorState: [\r\n            [255,255,255,1,0,0,0], \r\n            [255,255,255,1,0,0,0],\r\n            [255,255,255,1,0,0,0],\r\n            [255,255,255,1,0,0,0],\r\n            [255,255,255,1,0,0,0],\r\n            [255,255,255,1,0,0,0],\r\n            [255,255,255,1,0,0,0],\r\n            [255,255,255,1,0,0,0],\r\n            [255,255,255,1,0,0,0],\r\n            [255,255,255,1,0,0,0],\r\n        ],\r\n        currColorIndex: 0\r\n    },\r\n    reducers: {\r\n        updateColorState: (state, action) =>{\r\n            state.colorState = action.payload;\r\n        },\r\n        updateCurrColorIndex: (state, action) => {\r\n            state.currColorIndex = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst colorPickerSlice = createSlice({\r\n    name: 'ColorPicker',\r\n    initialState: {\r\n        colorState: [255,255,255,1,0,0,0],\r\n    },\r\n    reducers: {\r\n        updatePickerState: (state, action) => {state.colorState = action.payload; }\r\n    }\r\n});\r\n\r\nconst creatorSlice = createSlice({\r\n    name: 'Creator',\r\n    initialState: {\r\n        sketchId: 1,\r\n    },\r\n    reducers: {\r\n        updateSketchId: (state, action) => {state.sketchId = action.payload},\r\n    }\r\n});\r\n\r\nconst mainPageSlice = createSlice({\r\n    name: 'MainPage',\r\n    initialState: {\r\n        state:{\r\n            userInfo: {\r\n                loggedIn: false,\r\n                student_id: 0,\r\n                name: '',\r\n                fullname: '',\r\n                email: '',\r\n                role: '',\r\n            },\r\n            schemeList: {\r\n                \"schemes\": [\r\n                    {\r\n                        \"id\": 11,\r\n                        \"submission_time\": 1635945034,\r\n                        \"sketch_id\": 1,\r\n                        \"name\": \"波西米亚\",\r\n                        \"description\": \"。\",\r\n                        \"likes\": 2,\r\n                        \"approved\": true,\r\n                        \"author\":{\r\n                            \"student_id\": 2020010946,\r\n                            \"name\": \"xxx\",\r\n                            \"fullname\": \"xxx\",\r\n                            \"email\": \"xiangyan20@mails.tsinghua.edu.cn\",\r\n                            \"role\": \"Designer\"\r\n                        },\r\n                        \"hidden\": false,\r\n                        \"colors\":[[181, 122, 66, 1, 29, 0.64, 0.71],\r\n                                [185, 67, 64, 1, 1, 0.65, 0.73],\r\n                                [60, 148, 170, 1, 192, 0.65, 0.67],\r\n                                [128, 100, 32, 1, 43, 0.75, 0.5]],\r\n                        \"liked\": false\r\n                    }\r\n                ]\r\n            },\r\n            sketchList: {\r\n                \"sketch_list\":[\r\n                    {\r\n                        \"id\": 1,\r\n                        \"name\": \"4colorLogo1\",\r\n                        \"colors\": 4,\r\n                        \"data\": \"<svg id=\\\"图层_1\\\" data-name=\\\"图层 1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 521.68 133.53\\\" width=\\\"250\\\" height=\\\"200\\\">\\r\\n  <g>\\r\\n    <polygon points=\\\"87.1 35.84 114.43 76 114.43 61.92 87.1 24.34 87.1 35.84\\\" %%1%% ></polygon>\\r\\n    <polygon points=\\\"83.18 23.92 77.43 19 70.83 40.37 70.83 94.29 84.27 72.92 83.18 23.92\\\" %%2%% ></polygon>\\r\\n    <polygon points=\\\"126.81 17.92 124.68 17.92 119.18 24.92 119.68 72.92 130.93 72.92 130.06 22.05 126.81 17.92\\\" %%3%% ></polygon>\\r\\n    <circle cx=\\\"373.33\\\" cy=\\\"34.72\\\" r=\\\"10.44\\\" %%1%% ></circle>\\r\\n    <path d=\\\"M437.89,428.17c-.81-3.15-3.29-8.63-8.5-10.42V370.42H420v47.75a10.62,10.62,0,0,0-7.13,10.25c-4.62.5-9.87,2.75-9.75,8.13h43.13S447.39,429.17,437.89,428.17Z\\\" transform=\\\"translate(-52.06 -322.14)\\\" %%4%% ></path>\\r\\n    <rect x=\\\"42.08\\\" y=\\\"22.29\\\" width=\\\"14\\\" height=\\\"14\\\" %%4%% ></rect>\\r\\n    <rect x=\\\"79.35\\\" y=\\\"4.5\\\" width=\\\"9.83\\\" height=\\\"9.83\\\" %%3%% ></rect>\\r\\n    <rect x=\\\"97.45\\\" y=\\\"0.09\\\" width=\\\"9.83\\\" height=\\\"9.83\\\" %%2%% ></rect>\\r\\n    <rect x=\\\"114.27\\\" y=\\\"4.5\\\" width=\\\"9.83\\\" height=\\\"9.83\\\" %%1%% ></rect>\\r\\n    <polygon points=\\\"35.5 30.79 13.92 30.79 13.92 45.29 0 45.29 0.08 88.45 13.92 101.54 14.24 46.29 35.5 46.29 35.5 30.79\\\" %%3%% ></polygon>\\r\\n    <polygon points=\\\"25.5 115.62 53.25 115.62 53.25 102.12 14.75 102.12 25.5 115.62\\\" %%2%% ></polygon>\\r\\n    <polygon points=\\\"185.33 41.16 185.33 29.29 150.34 29.29 162.25 41.16 185.33 41.16\\\" %%3%% ></polygon>\\r\\n    <rect x=\\\"191.08\\\" y=\\\"36.29\\\" width=\\\"11.06\\\" height=\\\"11.06\\\" %%2%% ></rect>\\r\\n    <rect x=\\\"168.71\\\" y=\\\"107.04\\\" width=\\\"24.62\\\" height=\\\"6.25\\\" %%1%% ></rect>\\r\\n    <polygon points=\\\"158.08 96.29 158.05 96.29 157.33 50.79 145.21 38.54 145.21 96.29 145.21 102.12 145.21 107.04 145.21 112.16 166.21 112.16 166.21 103.04 193.96 103.04 193.96 98.66 158.08 98.66 158.08 96.29\\\" %%2%% ></polygon>\\r\\n    <polygon points=\\\"196.62 55.04 196.62 84.04 185.96 84.04 185.96 96.29 196.62 96.29 196.62 85.41 207.08 85.41 207.08 52.04 199.58 52.04 196.62 55.04\\\" %%4%% ></polygon>\\r\\n    <polygon points=\\\"218.08 104.67 229.96 116.53 229.96 67.07 217.33 54.55 218.08 104.67\\\" %%3%% ></polygon>\\r\\n    <path d=\\\"M285.14,384.67c6.63.12,11.38,0,11.38,0V371.79H272.25S278.77,377.79,285.14,384.67Z\\\" transform=\\\"translate(-52.06 -322.14)\\\" %%4%% ></path>\\r\\n    <rect x=\\\"246.83\\\" y=\\\"39.53\\\" width=\\\"13.25\\\" height=\\\"13.25\\\" %%3%% ></rect>\\r\\n    <rect x=\\\"262.46\\\" y=\\\"49.66\\\" width=\\\"11.12\\\" height=\\\"12.87\\\" %%1%% ></rect>\\r\\n    <rect x=\\\"233.71\\\" y=\\\"84.28\\\" width=\\\"26.37\\\" height=\\\"12.12\\\" %%1%% ></rect>\\r\\n    <polygon points=\\\"233.71 119.28 230.96 123.03 230.96 133.53 275.58 133.53 261.19 119.28 233.71 119.28\\\" %%2%% ></polygon>\\r\\n    <path d=\\\"M385.14,359.17H358.77v-7.81H340.14V423l9.32,9.33.4-35.75h34.53v-11.5h11V363.3H385.14Zm-1.25,25.88H350l.24-21.7h33.65Z\\\" transform=\\\"translate(-52.06 -322.14)\\\" %%3%% ></path>\\r\\n    <rect x=\\\"310.46\\\" y=\\\"27.04\\\" width=\\\"23.87\\\" height=\\\"4.37\\\" %%1%% ></rect>\\r\\n    <polygon points=\\\"398.52 91.28 412.17 91.28 412.17 67.03 398.52 53.48 398.52 91.28\\\" %%3%% ></polygon>\\r\\n    <rect x=\\\"412.75\\\" width=\\\"17.97\\\" height=\\\"12.94\\\" %%1%% ></rect>\\r\\n    <rect x=\\\"431.58\\\" y=\\\"13.8\\\" width=\\\"15.09\\\" height=\\\"23.43\\\" %%4%% ></rect>\\r\\n    <rect x=\\\"464.58\\\" y=\\\"45.91\\\" width=\\\"5.75\\\" height=\\\"22\\\" %%1%% ></rect>\\r\\n    <polygon points=\\\"467.9 42.29 474.08 42.29 474.08 65.41 478.33 65.41 478.33 42.29 478.33 41.1 478.33 33.16 467.9 33.16 467.9 42.29\\\" %%2%% ></polygon>\\r\\n    <polygon points=\\\"412.17 40.61 412.17 14.23 398.52 14.23 398.52 37.35 412.17 50.96 431.58 50.96 431.72 92.58 446.75 92.58 446.67 40.68 412.17 40.61\\\" %%2%% ></polygon>\\r\\n    <polygon points=\\\"479.4 66.29 479.77 76.22 491.02 76.22 492.21 115.29 501.02 115.29 501.02 76.29 507.27 76.29 497.25 66.29 479.4 66.29\\\" %%3%% ></polygon>\\r\\n    <polygon points=\\\"507.61 63.2 519.55 75.1 519.55 46.29 507.61 46.29 507.61 63.2\\\" %%3%% ></polygon>\\r\\n    <rect x=\\\"511.18\\\" y=\\\"32.22\\\" width=\\\"10.5\\\" height=\\\"9.25\\\" %%1%% ></rect>\\r\\n  </g>\\r\\n  <polygon points=\\\"120.83 92.49 130.37 78.85 120.14 78.85 117.41 82.76 86.89 82.76 84.16 78.85 70.83 100.22 83.48 92.49 120.83 92.49\\\" %%4%% ></polygon>\\r\\n</svg>\\r\\n\",\r\n                        \"hidden\": \"False\",\r\n                        \"defaultValue\": \"[[\\\"#f1ec57\\\", 1],[\\\"#6dbb51\\\", 1],[\\\"#ef7f3d\\\", 1],[\\\"#69a2d8\\\", 1]]\"\r\n                    }\r\n                ]\r\n            },\r\n            exploreScheme: {\"id\":87,\"submission_time\":1633797634,\"sketch_id\":1,\"name\":\"RuntimeErrrorrr\",\"description\":\"CodeGOGOOGOGOGOGO\",\"likes\":14,\"approved\":true,\"author\":{\"student_id\":2020010951,\"name\":\"cc7w\",\"fullname\":\"网络出问题啦~\",\"email\":\"gha@mails.tsinghua.edu.cn\",\"role\":\"Designer\"},\"hidden\":true,\"colors\":\"[[224,0,29,0.5,90,200,100],[143,200,10,1,79,30,200]]\"},\r\n            misc: {\r\n                sortStrategy: 'submission_time',\r\n                approved: false,\r\n            },\r\n            page: 'Creator', // 'Creator' or 'Explore' \r\n        }\r\n    },\r\n    reducers: {\r\n        updateMainPageState: (state, action) => {state.state = {...state.state, ...action.payload};}\r\n    }\r\n});\r\n\r\nexport const {updateColorState, updateCurrColorIndex} = colorEditorSlice.actions\r\nexport const {updatePickerState} = colorPickerSlice.actions\r\nexport const {updateSketchId} = creatorSlice.actions\r\nexport const {updateMainPageState} = mainPageSlice.actions\r\nexport const getColorState = (state: any) => {return state.colorEditor.colorState};\r\nexport const getCurrColorIndex = (state: any) => {return state.colorEditor.currColorIndex};\r\nexport const getPickerState = (state: any) => { return state.colorPicker.colorState;};\r\nexport const getCreatorSketchId = (state: any) => { return state.creator.sketchId;};\r\nexport const getMainPageState = (state: any) => {return state.mainPage.state}\r\n\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    colorEditor: colorEditorSlice.reducer,\r\n    colorPicker: colorPickerSlice.reducer,\r\n    creator: creatorSlice.reducer,\r\n    mainPage: mainPageSlice.reducer,\r\n  },\r\n})","\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getColorState, getCreatorSketchId, getCurrColorIndex, updateColorState, updatePickerState, updateSketchId } from \"../../store\";\nimport { RGB2HSV, String2ArrayRGB } from \"../../utils/Color\";\nimport ColorEditor from \"./ColorEditor/ColorEditor\";\nimport SketchList from \"./SketchList/SketchList\";\n\ninterface CreatorProps {\n    sketch: any; //原始的“{scheme:...}”字符串\n    onSubmit: (sketch_id: number, name: string, discription: string, color_List: number[][]) => void;\n}\n\n\nconst Creator = (props: CreatorProps) => {\n\n    const sketchId = useSelector(getCreatorSketchId);\n    const colorState = useSelector(getColorState);\n    const currColorIndex = useSelector(getCurrColorIndex);\n    const dispatch = useDispatch();\n    const [init, setInit] = useState(0);\n    \n    const getInitColorValue = (sketchId: number) => {\n        return eval(JSON.parse(props.sketch).sketch_list.filter((sketch: any)=>{return sketch.id === sketchId})[0].defaultValue).map((list: any) => {\n        // [\"#aabbcc\", 1] => [RGBAHSV]\n        const RGB_ = String2ArrayRGB(list[0]);\n        const RGBList = [0,0,0,list[1], RGB_[0], RGB_[1], RGB_[2]];\n        const fullList = RGB2HSV(RGBList);\n        return [\n            fullList[4],\n            fullList[5],\n            fullList[6],\n            fullList[3],\n            fullList[0],\n            fullList[1],\n            fullList[2]\n        ];\n    })};\n\n    useEffect(()=>{\n        // console.debug('sketch id changed')\n        setInit(init+1);\n    }, [sketchId]);\n\n    useEffect(()=>{\n        dispatch(updateColorState(getInitColorValue(sketchId)));\n        dispatch(updatePickerState(colorState[currColorIndex]));\n    }, [props.sketch]);\n\n    const getSketch = () => {return JSON.parse(props.sketch).sketch_list.filter((sketch: any)=>{return sketch.id === sketchId})[0].data;};\n\n    return (\n        <>\n            <div className=\"ColorEditor\">\n                <ColorEditor \n                    sketch={getSketch()} \n                    sketch_id={sketchId} \n                    initColorValue={getInitColorValue(sketchId)} \n                    onSubmit={props.onSubmit} />\n            </div>\n            <div className=\"SketchList\" style={{marginTop: '2rem'}}>\n                <SketchList str={props.sketch} onClickSketch={(id: number) => {\n                    dispatch(updateSketchId(id));\n                    dispatch(updateColorState(getInitColorValue(id)));\n                    // eslint-disable-next-line no-restricted-globals\n                    scrollTo(0, 0);\n                }}/>\n            </div>\n        </>\n    );\n};\n\n\nexport default Creator;","import React, { useState } from 'react';\r\nimport { String2ArrayRGB } from '../../../utils/Color';\r\nimport '../../../styles/SketchList.css';\r\nimport Preview from '../ColorEditor/WorkSpace/Preview'\r\nimport { Pagination, Tooltip } from 'antd';\r\nimport { useSelector } from 'react-redux';\r\nimport { getMainPageState } from '../../../store';\r\n\r\ninterface choose_props {\r\n    readonly str: string; //原始的“{scheme:...}”字符串\r\n    // readonly colorValueList: Array<Array<Array<number>>>; // 颜色三维数组\r\n    readonly onClickSketch: (id: number) => void; //回调\r\n}\r\n\r\ninterface choose_state {\r\n    readonly pre_id: number;\r\n}\r\n\r\nconst ChooseSketch = (props: choose_props) => {\r\n    const [page, setPage] = useState(1);\r\n    const sketchList = useSelector(getMainPageState).sketchList.sketch_list;\r\n\r\n    let rawList = sketchList; // 解析列表，用于获取 svg 代码\r\n    let list = rawList.map((sketch: any) => {\r\n            return eval(sketch.defaultValue).map((list: any) => {\r\n                // [\"#2F9B77\", 1] => [RGBAHSV]\r\n                const newColorArray = [255,255,255,list[1],0,0,0];\r\n                // TODO: Color/Convert RGB String to RGB List\r\n                const RGBList = String2ArrayRGB(list[0]); // TODO\r\n                newColorArray[0] = RGBList[0];\r\n                newColorArray[1] = RGBList[1];\r\n                newColorArray[2] = RGBList[2];\r\n                \r\n                return newColorArray;\r\n            })\r\n        })\r\n        let scratch_num = list.length;\r\n        let row = Math.trunc(scratch_num / 3) + 1;\r\n        let all_items = [];\r\n        for (let i = 0; i < row; i++){\r\n            let inside_arr = [];\r\n            for (let j = 0; j <= Math.min(2, scratch_num - i * 3 - 1); j++){\r\n                let index = i * 3 + j;\r\n                let scratch_data = rawList[index].data;\r\n                console.debug(index)\r\n                if( (page-1)* 6 <= index && index < page * 6){\r\n                    console.debug(123);\r\n                    inside_arr.push(\r\n                        <Tooltip placement=\"right\" title=\"请点击我以进行着色哦\" color=\"#2db7f5\" arrowPointAtCenter>\r\n                            <div style={{margin: '10px', cursor: 'pointer', backgroundColor: 'rgba(240,242,245,1)', borderRadius: '1rem', padding: '1rem'}} onClick={() => {props.onClickSketch(rawList[index].id)}}>\r\n                                <Preview raw_str={scratch_data} color_arr={list[index]} />\r\n                            </div>\r\n                        </Tooltip>\r\n                    );\r\n                }\r\n            }\r\n            all_items.push(<div className={\"one_row\"} key={\"row\"+i}>{inside_arr}</div>);\r\n        }\r\n\r\n        return (\r\n            <>\r\n               <div className={\"all_items\"}>{all_items}</div>\r\n                <Pagination onChange={(page, pageSize)=>{console.debug(parseInt(((sketchList.length+5) / 6).toString())); setPage( page );}} defaultPageSize={ 6  } total = {sketchList.length}></Pagination>\r\n            </>\r\n        );\r\n\r\n};\r\n\r\n\r\nexport default ChooseSketch;\r\n\r\n\r\n","import { Input, message, Tooltip } from \"antd\";\r\nimport TextArea from \"antd/lib/input/TextArea\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getMainPageState, updateColorState, updateCurrColorIndex, updateMainPageState, updatePickerState, updateSketchId } from \"../../store\";\r\nimport Preview from \"../Creator/ColorEditor/WorkSpace/Preview\";\r\nimport '../../styles/Explorer.css'\r\nimport {HeartOutlined, CheckCircleOutlined, DownloadOutlined, EditOutlined, DoubleRightOutlined} from '@ant-design/icons'\r\nimport { changeUserScheme, getExploreScheme } from \"../../utils/Network\";\r\n\r\n\r\n\r\nconst Explorer = ()=>{\r\n\r\n    const mainPageState = useSelector(getMainPageState);\r\n    const dispatch = useDispatch();\r\n\r\n    const getExploreRawSvg = (): string => {\r\n        const sketch_id = mainPageState.exploreScheme.sketch_id;\r\n        const filtered = mainPageState.sketchList.sketch_list.filter((sketch: any) => {return sketch.id === sketch_id});\r\n        if (filtered.length === 0) return '';\r\n        return filtered[0].data;\r\n    };\r\n\r\n\r\n    //刷新随机浏览界面\r\n    const refreshExplore = () : void => {\r\n        getExploreScheme(0, 'submission_time', false).then(\r\n            resp=>{\r\n                // TODO: 校验正确性\r\n                // TODO: 使用获得的 scheme 更新全局变量的 exploreScheme 的值\r\n                const schemeList = resp.schemes;\r\n                // Generate a random number between [0, schemeList.length)\r\n                const randomIndex = Math.floor(Math.random() * schemeList.length);\r\n                const newScheme = schemeList[randomIndex];\r\n\r\n                dispatch(updateMainPageState({exploreScheme: newScheme}));\r\n\r\n            }\r\n        )\r\n    }\r\n\r\n    //切换界面\r\n    const switchPage = (refresh: boolean) => {\r\n        if(refresh) {refreshExplore();}\r\n        dispatch(updateMainPageState({page: mainPageState.page === 'Creator' ? 'Explore' : 'Creator'}));\r\n    };\r\n\r\n    const vote = (): void => {\r\n        changeUserScheme(\"vote\",mainPageState.exploreScheme.id,[],'','',mainPageState.userInfo.student_id,0).then(\r\n            (resp: any)=>{\r\n                if (resp.err) {\r\n                    message.error(\"点赞失败...\");\r\n                } else {\r\n                    message.success(\"点赞成功~\");\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    const unvote = (): void => {\r\n        changeUserScheme(\"unvote\",mainPageState.exploreScheme.id,[],'','',mainPageState.userInfo.student_id,0).then(\r\n            (resp: any)=>{\r\n                if (resp.err) {\r\n                    message.error(\"取消点赞失败...\");\r\n                } else {\r\n                    message.success(\"取消点赞成功~\");\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    const approve = () => {\r\n        if (mainPageState.userInfo.role === 'Designer') {\r\n            if(mainPageState.exploreScheme.approved) {\r\n                changeUserScheme(\"disapprove\",mainPageState.exploreScheme.id,[],\"\",\"\",\"\",0).then(()=>{message.success(\"取消遴选成功~\")});\r\n                const newExploreScheme = JSON.parse(JSON.stringify(mainPageState.exploreScheme));\r\n                newExploreScheme.approved = false;\r\n                dispatch(updateMainPageState({exploreScheme: newExploreScheme}));\r\n            } else {\r\n                changeUserScheme(\"approve\",mainPageState.exploreScheme.id,[],\"\",\"\",\"\",0).then(()=>{message.success(\"遴选成功~\")});\r\n                const newExploreScheme = JSON.parse(JSON.stringify(mainPageState.exploreScheme));\r\n                newExploreScheme.approved = true;\r\n                dispatch(updateMainPageState({exploreScheme: newExploreScheme}));\r\n            }\r\n            \r\n        }\r\n    };\r\n\r\n    function like():void{\r\n        if(mainPageState.exploreScheme.liked){\r\n            const newExploreScheme = JSON.parse(JSON.stringify(mainPageState.exploreScheme));\r\n            newExploreScheme.liked = false;\r\n            newExploreScheme.likes -= 1;\r\n            dispatch(updateMainPageState({exploreScheme: newExploreScheme}));\r\n            unvote();\r\n        } else {\r\n            const newExploreScheme = JSON.parse(JSON.stringify(mainPageState.exploreScheme));\r\n            newExploreScheme.liked = true;\r\n            newExploreScheme.likes += 1;\r\n            dispatch(updateMainPageState({exploreScheme: newExploreScheme}));\r\n            vote();\r\n        }\r\n\r\n    }\r\n\r\n    //下一张\r\n    const next = (): void => {refreshExplore();}\r\n\r\n    //编辑\r\n    const edit = ():void => {\r\n        switchPage(false);\r\n        const exploreScheme = mainPageState.exploreScheme;\r\n\r\n        const sketch_id = exploreScheme.sketch_id;\r\n        const color = eval(exploreScheme.colors);\r\n        console.debug(color);\r\n\r\n        // set states\r\n        dispatch(updateCurrColorIndex(0));\r\n        dispatch(updatePickerState(color[0]));\r\n        dispatch(updateSketchId(sketch_id));\r\n        dispatch(updateColorState(color));\r\n\r\n        // eslint-disable-next-line no-restricted-globals\r\n        scrollTo(0,0);\r\n    }\r\n\r\n    const download = ()=>{\r\n        // TODO\r\n        function fakeClick(obj: any) {\r\n            let ev = document.createEvent(\"MouseEvents\");\r\n            ev.initMouseEvent(\"click\", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n            obj.dispatchEvent(ev);\r\n        }\r\n\r\n        function exportRaw(name: any, data: any) {\r\n            let urlObject = window.URL || window.webkitURL || window;\r\n            let export_blob = new Blob([data]);\r\n            let save_link : any = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\r\n            save_link.href = urlObject.createObjectURL(export_blob);\r\n            save_link.download = name;\r\n            fakeClick(save_link);\r\n        }\r\n\r\n        let my_color =  mainPageState.exploreScheme.colors; // [RGBAHSV]\r\n        let color_num;\r\n        let color_saved = []\r\n\r\n        color_num = my_color.length;\r\n        for (let i = 0; i < color_num; i++){\r\n            let tmp = my_color[i][0].toString(16).padStart(2, '0');\r\n            tmp += my_color[i][1].toString(16).padStart(2, '0');\r\n            tmp += my_color[i][2].toString(16).padStart(2, '0');\r\n            tmp = \"fill=\" + '\"#' + tmp + '\"';\r\n            \r\n            color_saved.push(tmp);\r\n        }\r\n\r\n        let svg = getExploreRawSvg();\r\n        for (let i = 1; i <= color_num; i++) {\r\n            let tmp = \"%%\" + i.toString() + \"%%\";\r\n            svg = svg.replaceAll(tmp, color_saved[i-1]);\r\n        }\r\n\r\n        exportRaw(mainPageState.exploreScheme.name + '.svg', svg)\r\n    };\r\n\r\n    return (<div className={\"Explorer\"} >\r\n        <div className=\"ExplorerViewer\">\r\n            <Preview raw_str={getExploreRawSvg()} color_arr={mainPageState.exploreScheme.colors}/>\r\n        </div>\r\n        <div className=\"ExplorerIntro\">\r\n            <Input\r\n                disabled\r\n                value={mainPageState.exploreScheme.name}\r\n                addonBefore=\"配色方案名称\"\r\n                style={{textAlign: 'center', color: 'black'}}\r\n            />\r\n                \r\n            <TextArea\r\n                autoSize={{ minRows: 3, maxRows: 3 }}\r\n                disabled\r\n                value={mainPageState.exploreScheme.description}\r\n            />\r\n        </div>\r\n        <div className=\"ExplorerOperations\" style={{userSelect: 'none'}}>\r\n            <div className=\"ExplorerSelect\">\r\n                <Tooltip title=\"精选\"><CheckCircleOutlined \r\n                    style={{\r\n                        fontSize: '1.5rem',\r\n                        color: mainPageState.exploreScheme.approved ? 'green' : 'grey',\r\n                        \r\n                    }} \r\n                    onClick={()=>{approve()}}\r\n                /></Tooltip>\r\n            </div>\r\n            <div className=\"ExplorerLike\" style={{display: 'flex', justifyContent:'center', alignItems:'center'}}>\r\n                <Tooltip title=\"为设计增加人气\"><HeartOutlined  \r\n                    style={{\r\n                        fontSize: '1.5rem',\r\n                        color: mainPageState.exploreScheme.liked ? 'red' : undefined\r\n                        \r\n                    }} \r\n                    onClick={()=>{like()}}\r\n                /></Tooltip>\r\n                <span style={{marginLeft: '0.5rem', fontSize: '0.9rem'}}>{mainPageState.exploreScheme.likes}</span>\r\n            </div>\r\n            <div className=\"ExplorerDownload\">\r\n                <Tooltip title=\"导出为 SVG\"><DownloadOutlined  \r\n                    style={{\r\n                        fontSize: '1.5rem',\r\n                        color: 'black'\r\n                        \r\n                    }} \r\n                    onClick={()=>{download()}}\r\n                /></Tooltip>\r\n            </div>\r\n            <div className=\"ExplorerEdit\">\r\n                <Tooltip title=\"二次创作\"><EditOutlined  \r\n                    style={{\r\n                        fontSize: '1.5rem',\r\n                        color: 'black'\r\n                        \r\n                    }} \r\n                    onClick={()=>{edit()}}\r\n                /></Tooltip>\r\n            </div>\r\n            <div className=\"ExplorerNext\">\r\n                <Tooltip title=\"随机浏览\"><DoubleRightOutlined \r\n                    style={{\r\n                        fontSize: '1.5rem',\r\n                        color: 'black'\r\n                        \r\n                    }} \r\n                    onClick={()=>{next()}}\r\n                /></Tooltip>\r\n            </div>\r\n\r\n        </div>\r\n    </div>);\r\n};\r\n\r\nexport default Explorer;","import React from 'react';\r\nimport '../../styles/HistoryList.css';\r\nimport { Button } from 'antd';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {faCheckCircle, faTimesCircle, faTrash} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useSelector } from 'react-redux';\r\nimport { getCreatorSketchId } from '../../store';\r\n\r\ninterface history_props {\r\n    readonly sort: (type:string, approved: boolean)=>void;\r\n    readonly getString: string;\r\n    readonly show_select: boolean;\r\n    readonly approve: (type:number)=>void;\r\n    readonly delete: (type:number)=>void;\r\n    readonly explore: (type:number)=>void;\r\n    readonly disapprove: (type:number)=>void;\r\n}\r\n\r\ninterface piece_props {\r\n    readonly ifhide: boolean;\r\n    readonly ifapprove: boolean;\r\n    readonly id: number;\r\n    readonly pic_class: number;\r\n    readonly select: boolean;\r\n    readonly color_num: number;\r\n    readonly color_str: any;\r\n    readonly author: string;\r\n    readonly pic_name: string;\r\n\r\n    readonly approve: (type:number)=>void;\r\n    readonly delete: (type:number)=>void;\r\n    readonly explore: (type:number)=>void;\r\n    readonly disapprove: (type:number)=>void;\r\n}\r\n\r\ninterface piece_state {\r\n    readonly ifapproved: boolean;\r\n}\r\n\r\nclass Piece extends React.Component<piece_props, piece_state> {\r\n\r\n    constructor(props: piece_props) {\r\n        super(props);\r\n        this.state={ifapproved:props.ifapprove};\r\n    }\r\n\r\n    handler (ifapprove: boolean, id: number) {\r\n        if (ifapprove){\r\n            this.props.disapprove(id);\r\n            this.setState({ifapproved:false});\r\n        }\r\n        else {\r\n            this.props.approve(id);\r\n            this.setState({ifapproved:true});\r\n        }\r\n    }\r\n\r\n    render () {\r\n        let color_bind = [];\r\n        for (let i = 0; i < this.props.color_num; i++) {\r\n            let tmp_str = \"rgba(\" + this.props.color_str[i][0] + \",\" + this.props.color_str[i][1] + \",\" + this.props.color_str[i][2] + \",\" + this.props.color_str[i][3] + \")\";\r\n            color_bind.push(<div className=\"color\" style={{backgroundColor: tmp_str, opacity: this.props.color_str[i][3]}}/>);\r\n        }\r\n        if (this.props.select) {\r\n            if(this.props.ifapprove) {\r\n                if (this.props.ifhide) {\r\n                    return (\r\n                        <div className={\"piece\"}>\r\n                            {/* <div className={\"pic_class\"}>{this.props.pic_class}</div>\r\n                            <div className={\"delete\"} onClick={()=>{this.props.delete(this.props.id)}}>\r\n                                <FontAwesomeIcon icon={faTrash} style={{color:\"red\"}}/>\r\n                            </div> */}\r\n                            <div className={\"select\"} onClick={()=>{this.handler(this.state.ifapproved, this.props.id)}}>\r\n                                <FontAwesomeIcon icon={faCheckCircle} style={{color:\"green\"}}/>\r\n                            </div>\r\n                            <div className=\"color_bind\" onClick={()=>{this.props.explore(this.props.id)}}>\r\n                                {color_bind}\r\n                            </div>\r\n                            <div className=\"author\">{this.props.author}</div>\r\n                            <div className=\"pic_name\">{this.props.pic_name}</div>\r\n                        </div>\r\n                    )\r\n                }\r\n                else {\r\n                    return (\r\n                        <div className={\"piece\"}>\r\n                            {/* <div className={\"pic_class\"}>{this.props.pic_class}</div>\r\n                            <div className={\"delete\"} onClick={()=>{this.props.delete(this.props.id)}}>\r\n                                <FontAwesomeIcon icon={faTrash}/>\r\n                            </div>*/}\r\n                            <div className={\"select\"} onClick={()=>{this.handler(this.state.ifapproved, this.props.id)}}>\r\n                                <FontAwesomeIcon icon={faCheckCircle} style={{color:\"green\"}}/>\r\n                            </div> \r\n                            <div className=\"color_bind\" onClick={()=>{this.props.explore(this.props.id)}}>\r\n                                {color_bind}\r\n                            </div>\r\n                            <div className=\"author\">{this.props.author}</div>\r\n                            <div className=\"pic_name\">{this.props.pic_name}</div>\r\n                        </div>\r\n                    )\r\n                }\r\n            }\r\n            else {\r\n                if (this.props.ifhide) {\r\n                    return (\r\n                        <div className={\"piece\"}>\r\n                            {/* <div className={\"pic_class\"}>{this.props.pic_class}</div>\r\n                            <div className={\"delete\"} onClick={()=>{this.props.delete(this.props.id)}}>\r\n                                <FontAwesomeIcon icon={faTrash} style={{color:\"red\"}}/>\r\n                            </div>*/}\r\n                            <div className={\"select\"} onClick={()=>{this.handler(this.state.ifapproved, this.props.id)}}>\r\n                                <FontAwesomeIcon icon={faCheckCircle} style={{color:\"grey\"}}/>\r\n                            </div> \r\n                            <div className=\"color_bind\" onClick={()=>{this.props.explore(this.props.id)}}>\r\n                                {color_bind}\r\n                            </div>\r\n                            <div className=\"author\">{this.props.author}</div>\r\n                            <div className=\"pic_name\">{this.props.pic_name}</div>\r\n                        </div>\r\n                    )\r\n                }\r\n                else {\r\n                    return (\r\n                        <div className={\"piece\"}>\r\n                            {/* <div className={\"pic_class\"}>{this.props.pic_class}</div>\r\n                            <div className={\"delete\"} onClick={()=>{this.props.delete(this.props.id)}}>\r\n                                <FontAwesomeIcon icon={faTrash}/>\r\n                            </div>*/}\r\n                            <div className={\"select\"} onClick={()=>{this.handler(this.state.ifapproved, this.props.id)}}>\r\n                                <FontAwesomeIcon icon={faCheckCircle} style={{color:\"grey\"}}/>\r\n                            </div> \r\n                            <div className=\"color_bind\" onClick={()=>{this.props.explore(this.props.id)}}>\r\n                                {color_bind}\r\n                            </div>\r\n                            <div className=\"author\">{this.props.author}</div>\r\n                            <div className=\"pic_name\">{this.props.pic_name}</div>\r\n                        </div>\r\n                    )\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.props.ifhide) {\r\n                return (\r\n                    <div className={\"piece\"}>\r\n                        {/* <div className={\"pic_class\"}>{this.props.pic_class}</div>\r\n                        <div className={\"delete\"} onClick={()=>{this.props.delete(this.props.id)}}>\r\n                            <FontAwesomeIcon icon={faTrash} style={{color:\"red\"}}/>\r\n                        </div>*/}\r\n                        <div className={\"select\"} onClick={()=>{this.props.approve(this.props.id)}}></div> \r\n                        <div className=\"color_bind\" onClick={()=>{this.props.explore(this.props.id)}}>\r\n                            {color_bind}\r\n                        </div>\r\n                        <div className=\"author\">{this.props.author}</div>\r\n                        <div className=\"pic_name\">{this.props.pic_name}</div>\r\n                    </div>\r\n                )\r\n            }\r\n            else {\r\n                return (\r\n                    <div className={\"piece\"}>\r\n                        {/* <div className={\"pic_class\"}>{this.props.pic_class}</div>\r\n                        <div className={\"delete\"} onClick={()=>{this.props.delete(this.props.id)}}>\r\n                            <FontAwesomeIcon icon={faTrash}/>\r\n                        </div>*/}\r\n                        <div className={\"select\"} onClick={()=>{this.props.approve(this.props.id)}}></div> \r\n                        <div className=\"color_bind\" onClick={()=>{this.props.explore(this.props.id)}}>\r\n                            {color_bind}\r\n                        </div>\r\n                        <div className=\"author\">{this.props.author}</div>\r\n                        <div className=\"pic_name\">{this.props.pic_name}</div>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst HistoryList = (props: history_props)=>{\r\n\r\n    let currSketchId = useSelector(getCreatorSketchId);\r\n\r\n    let arr_left = [];\r\n        let arr_right = [];\r\n        let s = props.getString;\r\n        // let s = '{\"schemes\":[' +\r\n        //     '{\"id\":87,\"submission_time\":1633797634,\"sketch_id\":1,\"name\":\"RuntimeErrrorrr\",\"description\":\"CodeGOGOOGOGOGOGO\",\"likes\":14,\"approved\":true,\"author\":{\"student_id\":2020010951,\"name\":\"cc7w\",\"fullname\":\"昂\",\"email\":\"gha@mails.tsinghua.edu.cn\",\"role\":\"Designer\"},\"hidden\":false,\"colors\":\"[[224,0,29,0.5,90,200,100],[143,200,10,1,79,30,200]]\"}' +\r\n        //     ',{\"id\":87,\"submission_time\":1633797634,\"sketch_id\":1,\"name\":\"RuntimeErrrorrr\",\"description\":\"CodeGOGOOGOGOGOGO\",\"likes\":14,\"approved\":false,\"author\":{\"student_id\":2020010951,\"name\":\"cc7w\",\"fullname\":\"昂\",\"email\":\"gha@mails.tsinghua.edu.cn\",\"role\":\"Designer\"},\"hidden\":true,\"colors\":\"[[224,0,29,0.5,90,200,100],[143,200,10,1,79,30,200]]\"}' +\r\n        //     ',{\"id\":87,\"submission_time\":1633797634,\"sketch_id\":1,\"name\":\"RuntimeErrrorrr\",\"description\":\"CodeGOGOOGOGOGOGO\",\"likes\":14,\"approved\":false,\"author\":{\"student_id\":2020010951,\"name\":\"cc7w\",\"fullname\":\"昂\",\"email\":\"gha@mails.tsinghua.edu.cn\",\"role\":\"Designer\"},\"hidden\":false,\"colors\":\"[[224,0,29,0.5,90,200,100],[143,200,10,1,79,30,200]]\"}' +\r\n        //     ',{\"id\":87,\"submission_time\":1633797634,\"sketch_id\":1,\"name\":\"RuntimeErrrorrr\",\"description\":\"CodeGOGOOGOGOGOGO\",\"likes\":14,\"approved\":false,\"author\":{\"student_id\":2020010951,\"name\":\"cc7w\",\"fullname\":\"昂\",\"email\":\"gha@mails.tsinghua.edu.cn\",\"role\":\"Designer\"},\"hidden\":true,\"colors\":\"[[224,0,29,0.5,90,200,100],[143,200,10,1,79,30,200]]\"}' +\r\n        //     ',{\"id\":87,\"submission_time\":1633797634,\"sketch_id\":1,\"name\":\"RuntimeErrrorrr\",\"description\":\"CodeGOGOOGOGOGOGO\",\"likes\":14,\"approved\":true,\"author\":{\"student_id\":2020010951,\"name\":\"cc7w\",\"fullname\":\"昂\",\"email\":\"gha@mails.tsinghua.edu.cn\",\"role\":\"Designer\"},\"hidden\":true,\"colors\":\"[[224,0,29,0.5,90,200,100],[143,200,10,1,79,30,200]]\"}]}'\r\n        if (s !== \"\") {\r\n            let parjson = JSON.parse(s);\r\n            parjson.schemes = parjson.schemes.filter((scheme: any)=>{return scheme.sketch_id === currSketchId;})\r\n            let num = parjson.schemes.length;\r\n            let left_num = num - Math.trunc(num / 2);\r\n\r\n            for(let i = 0; i < left_num; i++){\r\n                let p = parjson.schemes[i];\r\n                let id = p.id;\r\n                let pic_class = p.sketch_id;\r\n                let select = props.show_select;\r\n                let mycolor = eval(p.colors);\r\n                let color_num = mycolor.length;\r\n                let author = p.author.fullname;\r\n                let pic_name = p.name;\r\n                let color_str = [];\r\n                let ifapprove = p.approved;\r\n                let ifhide = p.hidden;\r\n                for(let j = 0; j < color_num; j++){\r\n                    let r = mycolor[j][0]; //取rgb值的第一个,位置待定\r\n                    let g = mycolor[j][1];\r\n                    let b = mycolor[j][2];\r\n                    let a = mycolor[j][3];\r\n                    let tmp = [r, g, b, a];\r\n                    color_str.push(tmp);\r\n                }\r\n                arr_left.push(<Piece ifhide={ifhide} ifapprove={ifapprove} id={id} select={select} author={author} pic_name={pic_name} pic_class={pic_class} color_num={color_num}\r\n                                     color_str={color_str} explore={props.explore} delete={props.delete} approve={props.approve} disapprove={props.disapprove}/>)\r\n            }\r\n\r\n            for(let i = left_num; i < num; i++){\r\n                let p = parjson.schemes[i];\r\n                let id = p.id;\r\n                let pic_class = p.sketch_id;\r\n                let select = props.show_select;\r\n                let mycolor = eval(p.colors);\r\n                let color_num = mycolor.length;\r\n                let author = p.author.fullname;\r\n                let pic_name = p.name;\r\n                let color_str = [];\r\n                let ifapprove = p.approved;\r\n                let ifhide = p.hidden;\r\n                for(let j = 0; j < color_num; j++){\r\n                    let r = mycolor[j][0]; //取rgb值的第一个,位置待定\r\n                    let g = mycolor[j][1];\r\n                    let b = mycolor[j][2];\r\n                    let a = mycolor[j][3];\r\n                    let tmp = [r, g, b, a];\r\n                    color_str.push(tmp);\r\n                }\r\n                arr_right.push(<Piece ifhide={ifhide} ifapprove={ifapprove} id={id} select={select} author={author} pic_name={pic_name} pic_class={pic_class} color_num={color_num}\r\n                                     color_str={color_str} explore={props.explore} delete={props.delete} approve={props.approve} disapprove={props.disapprove}/>)\r\n            }\r\n        \r\n            return(\r\n            <div className={\"history_list\"}>\r\n                <div className={\"order_buttons\"}>\r\n                    <Button shape={\"round\"} className={\"order_button\"} onClick={() => props.sort(\"vote\", false)}>点赞降序</Button>\r\n                    <Button shape={\"round\"} className={\"order_button\"} onClick={() => props.sort(\"hue\", false)}>色相顺序</Button>\r\n                    <Button shape={\"round\"} className={\"order_button\"} onClick={() => props.sort(\"designer_name\", false)}>作者顺序</Button>\r\n                    <div style={{flexGrow: 100}}></div>\r\n                    <Button shape={\"round\"} className={\"order_button\"} onClick={()=>{props.sort(\"\", true)}}>仅查看遴选</Button>\r\n                </div>\r\n                <div className={\"two_lists\"}>\r\n                    <div className={\"left_list\"}>\r\n                        <div className={\"piece\"}>\r\n                            {/* <div className={\"pic_class\"}>图号</div>\r\n                            <div className={\"delete\"}></div>*/}\r\n                            <div className={\"select\"}></div> \r\n                            <div className=\"color_bind\">配色方案</div>\r\n                            <div className=\"author\">作者</div>\r\n                            <div className=\"pic_name\">方案名称</div>\r\n                        </div>\r\n                        <div>\r\n                            {arr_left}\r\n                        </div>\r\n                    </div>\r\n                    <div className={\"left_list\"}>\r\n                        <div className={\"piece\"}>\r\n                            {/* <div className={\"pic_class\"}>图号</div>\r\n                            <div className={\"delete\"}></div> */}\r\n                            <div className={\"select\"}></div>\r\n                            <div className=\"color_bind\">配色方案</div>\r\n                            <div className=\"author\">作者</div>\r\n                            <div className=\"pic_name\">方案名称</div>\r\n                        </div>\r\n                        <div>\r\n                            {arr_right}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            )\r\n        } else {\r\n            return <></>\r\n        }\r\n            \r\n\r\n};\r\n\r\nexport default HistoryList;\r\n","import React from \"react\";\r\nimport { Tooltip } from \"antd\";\r\n\r\ninterface ColorButtonProps {\r\n    id: number;\r\n    onClick: (id: number) => void; // 回调函数，声明自己被选中\r\n    color: Array<number>;\r\n    selected: boolean;\r\n}\r\n\r\nexport default function ColorButton (props: ColorButtonProps){\r\n\r\n    const handleClick = () => {\r\n        props.onClick(props.id);\r\n    };\r\n\r\n    if(! props.color) return <></>;\r\n    \r\n    return (\r\n        <div className=\"wrapper\" id={\"wrapper\" + props.id.toString()}>\r\n            <Tooltip placement=\"topLeft\" title=\"请选中以编辑此色块\" color=\"#2db7f5\" arrowPointAtCenter>\r\n                <button className=\"colorButton\"\r\n                        id={\"button\" + props.id.toString()}\r\n                        onClick={handleClick}\r\n                        style={{\r\n                            backgroundColor: \"rgb(\" + props.color[0] +',' + props.color[1] + ',' + props.color[2] +  \")\",\r\n                            boxShadow: (()=>{ if (props.selected) {\r\n                                return \"0 0 20px rgb(\" + props.color[0] +',' + props.color[1] + ',' + props.color[2] +  \")\"\r\n                            } else {return \"\"}})()\r\n                        }}\r\n                />\r\n            </Tooltip>\r\n        </div>\r\n\r\n    )\r\n}","import {Col, InputNumber, Row, Tooltip} from \"antd\";\r\nimport Slider from \"rc-slider\";\r\nimport React from \"react\";\r\n\r\ninterface ColorSliderProps {\r\n    readonly description: string; // 文字描述\r\n    readonly onChange: (id: number, value: number) => void ; // 回调函数\r\n    readonly step: number; // 滑动间距\r\n    readonly id: number; // 第几个滑动条\r\n    readonly min: number; // 滑动条最小值\r\n    readonly max: number; // 滑动条最大值\r\n    readonly value: number; // 设置滑动条值\r\n}\r\n\r\nexport default function ColorSlider(props: ColorSliderProps) {\r\n    // 监听滑块滑动并设置当前状态\r\n    const onChange = (value: number) => {\r\n        if(!value){\r\n            value = 0;\r\n        }\r\n        props.onChange(props.id, value);\r\n    }\r\n\r\n    let colorGradient: string = \"\";\r\n    let propsString: string = \"\";\r\n    let opacity: number = 0;\r\n    switch (props.id){\r\n        case 0:\r\n            colorGradient = \"linear-gradient(to right, #f00 0%, #ff0 16.66%, #0f0 33.33%, #0ff 50%, #00f 66.66%, #f0f 83.33%, #f00 100%)\";\r\n            propsString = \"请输入 0-360 的整数\";\r\n            break;\r\n        case 1:\r\n            colorGradient = \"linear-gradient(to right, white, transparent)\";\r\n            propsString = \"请输入 0-1 的小数\";\r\n            break;\r\n        case 2:\r\n            colorGradient = \"linear-gradient(to right, black, transparent)\";\r\n            propsString = \"请输入 0-1 的小数\";\r\n            break;\r\n        case 3:\r\n            opacity = 1;\r\n            propsString = \"请输入 0-1 的小数\";\r\n            break;\r\n        case 4:\r\n            colorGradient = \"linear-gradient(to right, transparent, red)\";\r\n            propsString = \"请输入 0-255 的整数\";\r\n            break;\r\n        case 5:\r\n            colorGradient = \"linear-gradient(to right, transparent, green)\";\r\n            propsString = \"请输入 0-255 的整数\";\r\n            break;\r\n        case 6:\r\n            colorGradient = \"linear-gradient(to right, transparent, blue)\";\r\n            propsString = \"请输入 0-255 的整数\";\r\n            break;\r\n    }\r\n    return (\r\n        <div className=\"colorBlock\">\r\n            <div className=\"colorDescription\">\r\n                <p><b>{props.description}</b></p>\r\n            </div>\r\n            <div className=\"colorSlider\">\r\n                <Row>\r\n                    <Col span={12}>\r\n                        <Tooltip placement=\"topLeft\" title=\"请拖动我以进行编辑哦\" color=\"#2db7f5\" arrowPointAtCenter>\r\n                            <Slider\r\n                                min={props.min}\r\n                                max={props.max}\r\n                                onChange={onChange}\r\n                                step={props.step}\r\n                                trackStyle={{\r\n                                    opacity: opacity\r\n                                }}\r\n                                railStyle={{\r\n                                    backgroundImage: colorGradient\r\n                                }}\r\n                                value={props.value}\r\n                            />\r\n                        </Tooltip>\r\n\r\n                    </Col>\r\n                    <Col span={4}>\r\n                        <Tooltip placement=\"topLeft\" title={propsString} color=\"#2db7f5\" arrowPointAtCenter>\r\n                            <InputNumber\r\n                                min={props.min}\r\n                                max={props.max}\r\n                                style={{ margin: '0 16px' }}\r\n                                value={props.value}\r\n                                onChange={onChange}\r\n                            />\r\n                        </Tooltip>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {useEffect, useRef, useState} from \"react\";\nimport \"../../../../styles/ColorEditor.css\";\n\nimport ColorSlider from \"./ColorSlider\";\nimport {HSV2RGB, RGB2HSV} from \"../../../../utils/Color\";\n\nimport \"rc-slider/assets/index.css\";\n\nimport {ReloadOutlined} from \"@ant-design/icons\"\n\nimport {Button, Input, Mentions, Tooltip} from \"antd\";\nimport TextArea from \"antd/lib/input/TextArea\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getPickerState, updatePickerState} from \"../../../../store\";\nimport { getRandomName } from \"../../../../utils/Network\";\n\n\ninterface ColorPickerProps {\n    initColor: Array<number>;\n    onSubmit: (name:string,description:string)=>void;\n    colorOnChange: (newColorArray: Array<number>)=>void;\n};\n\nconst ColorPicker = (props: ColorPickerProps) => {\n\n    const colorPickerState = useSelector(getPickerState);\n    const dispatch = useDispatch();\n    const [name, setName] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n\n    const colorOnChange = (id: number, value: number) => {\n        const colorArrayBefore = [\n          colorPickerState[4],\n          colorPickerState[5],\n          colorPickerState[6],\n          colorPickerState[3],\n          colorPickerState[0],\n          colorPickerState[1],\n          colorPickerState[2],\n        ];\n        colorArrayBefore[id] = value;\n        let colorArrayAfter = colorArrayBefore;\n        if (id < 3){\n            colorArrayAfter = HSV2RGB(colorArrayBefore);\n        }\n        else if (id > 3){\n            colorArrayAfter = RGB2HSV(colorArrayBefore);\n        }\n        const newColorArray = [\n          colorArrayAfter[4],\n          colorArrayAfter[5],\n          colorArrayAfter[6],\n          colorArrayAfter[3],\n          colorArrayAfter[0],\n          colorArrayAfter[1],\n          colorArrayAfter[2],\n        ];\n\n        dispatch(updatePickerState(newColorArray));\n        props.colorOnChange(newColorArray);\n\n\n    };\n\n    useEffect(()=>{\n        dispatch(updatePickerState(props.initColor));\n    }, [])\n\n\n  return (\n    <div className=\"colorPicker\">\n      <div className=\"colorArea\">\n          <div className=\"up\">\n              <div className=\"LeftColor\">\n                  <ColorSlider\n                      description=\"饱和度(S):\"\n                      id={1}\n                      onChange={colorOnChange}\n                      value={colorPickerState[5]}\n                      step={0.01}\n                      min={0}\n                      max={1}\n                  />\n                  <ColorSlider\n                      description=\"明度(V):\"\n                      id={2}\n                      onChange={colorOnChange}\n                      value={colorPickerState[6]}\n                      step={0.01}\n                      min={0}\n                      max={1}\n                  />\n                  <ColorSlider\n                      description=\"不透明度(A)\"\n                      id={3}\n                      onChange={colorOnChange}\n                      value={colorPickerState[3]}\n                      step={0.01}\n                      min={0}\n                      max={1}\n                  />\n              </div>\n              <div className=\"RightColor\">\n                  <ColorSlider\n                      description=\"红色(R):\"\n                      id={4}\n                      onChange={colorOnChange}\n                      value={colorPickerState[0]}\n                      step={1}\n                      min={0}\n                      max={255}\n                  />\n                  <ColorSlider\n                      description=\"绿色(G):\"\n                      id={5}\n                      onChange={colorOnChange}\n                      value={colorPickerState[1]}\n                      step={1}\n                      min={0}\n                      max={255}\n                  />\n                  <ColorSlider\n                      description=\"蓝色(B):\"\n                      id={6}\n                      onChange={colorOnChange}\n                      value={colorPickerState[2]}\n                      step={1}\n                      min={0}\n                      max={255}\n                  />\n              </div>\n          </div>\n          <div className=\"down\">\n              <div className=\"bottomColor\">\n                  <ColorSlider\n                      description=\"色相(H):\"\n                      id={0}\n                      onChange={colorOnChange}\n                      value={colorPickerState[4]}\n                      step={1}\n                      min={0}\n                      max={360}\n                  />\n                  <div className=\"colorHex\">\n                      <b>HexValue ：</b>\n                  </div>\n                  <div className=\"input\">\n                      <Mentions style={{width: '60%'}} value={\"#\" + colorPickerState[0].toString(16).padStart(2, \"0\") + colorPickerState[1].toString(16).padStart(2, \"0\") + colorPickerState[2].toString(16).padStart(2, \"0\")} readOnly/>\n                  </div>\n              </div>\n          </div>\n      </div>\n      <div className=\"inputFrame\">\n        <p className=\"fontSize\" style={{userSelect: 'none'}}>\n          <b>配色方案名称 :</b> &nbsp;&nbsp;&nbsp;&nbsp; \n            <Tooltip title=\"起名困难？点我生成！\" color=\"#2db7f5\" arrowPointAtCenter>\n              <ReloadOutlined onClick={()=>{getRandomName().then((resp:any) => {setName(resp.name)})}} />\n            </Tooltip>\n        </p>\n        <Input\n          placeholder=\"Please input the name of your scheme ~ \"\n          allowClear\n          value={name}\n          onChange={(event: any)=>{setName(event.target.value)}}\n        />\n        <br />\n        <br />\n        <p className=\"fontSize\">\n          <b>配色方案描述 :</b>\n        </p>\n        <TextArea\n          placeholder=\"Please input the description of your scheme ~ \"\n          rows={4}\n          allowClear\n          value={description}\n          onChange={(event: any)=>{setDescription(event.target.value)}}\n        />\n        <br />\n        <br />\n        <Button\n          type=\"primary\"\n          htmlType=\"submit\"\n          onClick={()=>{props.onSubmit(name, description);}}\n        >\n          提交\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default ColorPicker;","\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setConstantValue } from \"typescript\";\nimport { getColorState, getCreatorSketchId, getCurrColorIndex, getMainPageState, updateColorState, updateCurrColorIndex, updatePickerState } from \"../../../store\";\nimport ColorButton from \"./WorkSpace/ColorButton\";\nimport ColorPicker from \"./WorkSpace/ColorPicker\";\nimport Preview from \"./WorkSpace/Preview\";\n\n\ninterface ColorEditorProps {\n    sketch: string;\n    sketch_id: number;\n    initColorValue: Array<Array<number>>; // [[R, G, B, A, H, S, V] x n]\n    onSubmit: (sketch_id:number,name:string,discription:string,color_List:number[][])=>void;\n}\n\n\nconst ColorEditor = (props: ColorEditorProps) => {\n    const dispatch = useDispatch();\n    const [sketch, setSketch] = useState(props.sketch);\n    const colorState = useSelector(getColorState);\n    const currColorIndex = useSelector(getCurrColorIndex);\n    const currSketchId = useSelector(getCreatorSketchId);\n    const [init, setInit] = useState(0);\n    const mainPageState = useSelector(getMainPageState);\n    // const [colorState, setColorState] = useState<Array<Array<number>>>(props.initColorValue);\n    // const [currColorIndex, setCurrColorIndex] = useState<number>(0);\n\n\n    const onColorPickerColorChange = (newColorArray: Array<number>) => {\n        const newColorState = colorState.slice();\n        newColorState[currColorIndex] = newColorArray;\n        dispatch(updateColorState(newColorState))\n        // console.debug(colorState);\n        // console.debug(newColorState);\n    }\n\n    const buttonList = [] ;\n    const length = props.initColorValue.length;\n    for (let i = 0; i < length; ++i) {\n        buttonList.push(<ColorButton key={\"button-\"+i} id={i} onClick={()=>{dispatch(updateCurrColorIndex(i));} } color={colorState[i]} selected={currColorIndex === i}></ColorButton>)\n    }\n\n    useEffect(()=>{\n        dispatch(updateCurrColorIndex(0));\n        setSketch(mainPageState.sketchList.sketch_list.filter((sketch: any) => {return sketch.id === currSketchId})[0].data);\n        setInit(init+1);\n    }, [currSketchId]);\n\n    useEffect(()=>{\n        dispatch(updatePickerState(colorState[currColorIndex]));\n    }, [currColorIndex, init, currSketchId]);\n\n    useEffect(()=>{}, [props.sketch])\n\n    return (\n        <>\n        <div className=\"sketchPreview\">\n            <Preview raw_str={sketch} color_arr={colorState}/>\n        </div>\n        <div className=\"colorToChoose\">{buttonList}</div>\n        <div className=\"ColorPicker\">\n            <ColorPicker initColor={colorState[currColorIndex]} colorOnChange={onColorPickerColorChange} onSubmit={(name: string, description: string) => {\n                props.onSubmit(props.sketch_id, name, description, colorState)\n            }}/>\n        </div>\n        </>\n    );\n};\n\nexport default ColorEditor;","const MD5 = function (string) {\r\n    function RotateLeft(lValue, iShiftBits) {\r\n        return (lValue<<iShiftBits) | (lValue>>>(32-iShiftBits));\r\n    }\r\n    function AddUnsigned(lX,lY) {\r\n        var lX4,lY4,lX8,lY8,lResult;\r\n        lX8 = (lX & 0x80000000);\r\n        lY8 = (lY & 0x80000000);\r\n        lX4 = (lX & 0x40000000);\r\n        lY4 = (lY & 0x40000000);\r\n        lResult = (lX & 0x3FFFFFFF)+(lY & 0x3FFFFFFF);\r\n        if (lX4 & lY4) {\r\n            return (lResult ^ 0x80000000 ^ lX8 ^ lY8);\r\n        }\r\n        if (lX4 | lY4) {\r\n            if (lResult & 0x40000000) {\r\n                return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);\r\n            } else {\r\n                return (lResult ^ 0x40000000 ^ lX8 ^ lY8);\r\n            }\r\n        } else {\r\n            return (lResult ^ lX8 ^ lY8);\r\n        }\r\n    }\r\n    function F(x,y,z) { return (x & y) | ((~x) & z); }\r\n    function G(x,y,z) { return (x & z) | (y & (~z)); }\r\n    function H(x,y,z) { return (x ^ y ^ z); }\r\n    function I(x,y,z) { return (y ^ (x | (~z))); }\r\n    function FF(a,b,c,d,x,s,ac) {\r\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\r\n        return AddUnsigned(RotateLeft(a, s), b);\r\n    };\r\n    function GG(a,b,c,d,x,s,ac) {\r\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\r\n        return AddUnsigned(RotateLeft(a, s), b);\r\n    };\r\n    function HH(a,b,c,d,x,s,ac) {\r\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\r\n        return AddUnsigned(RotateLeft(a, s), b);\r\n    };\r\n    function II(a,b,c,d,x,s,ac) {\r\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\r\n        return AddUnsigned(RotateLeft(a, s), b);\r\n    };\r\n    function ConvertToWordArray(string) {\r\n        var lWordCount;\r\n        var lMessageLength = string.length;\r\n        var lNumberOfWords_temp1=lMessageLength + 8;\r\n        var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1 % 64))/64;\r\n        var lNumberOfWords = (lNumberOfWords_temp2+1)*16;\r\n        var lWordArray=Array(lNumberOfWords-1);\r\n        var lBytePosition = 0;\r\n        var lByteCount = 0;\r\n        while ( lByteCount < lMessageLength ) {\r\n            lWordCount = (lByteCount-(lByteCount % 4))/4;\r\n            lBytePosition = (lByteCount % 4)*8;\r\n            lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount)<<lBytePosition));\r\n            lByteCount++;\r\n        }\r\n        lWordCount = (lByteCount-(lByteCount % 4))/4;\r\n        lBytePosition = (lByteCount % 4)*8;\r\n        lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80<<lBytePosition);\r\n        lWordArray[lNumberOfWords-2] = lMessageLength<<3;\r\n        lWordArray[lNumberOfWords-1] = lMessageLength>>>29;\r\n        return lWordArray;\r\n    };\r\n    function WordToHex(lValue) {\r\n        var WordToHexValue=\"\",WordToHexValue_temp=\"\",lByte,lCount;\r\n        for (lCount = 0;lCount<=3;lCount++) {\r\n            lByte = (lValue>>>(lCount*8)) & 255;\r\n            WordToHexValue_temp = \"0\" + lByte.toString(16);\r\n            WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);\r\n        }\r\n        return WordToHexValue;\r\n    };\r\n    function Utf8Encode(string) {\r\n        string = string.replace(/\\r\\n/g,\"\\n\");\r\n        var utftext = \"\";\r\n        for (var n = 0; n < string.length; n++) {\r\n            var c = string.charCodeAt(n);\r\n            if (c < 128) {\r\n                utftext += String.fromCharCode(c);\r\n            }\r\n            else if((c > 127) && (c < 2048)) {\r\n                utftext += String.fromCharCode((c >> 6) | 192);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n            else {\r\n                utftext += String.fromCharCode((c >> 12) | 224);\r\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n        }\r\n        return utftext;\r\n    };\r\n    var x=Array();\r\n    var k,AA,BB,CC,DD,a,b,c,d;\r\n    var S11=7, S12=12, S13=17, S14=22;\r\n    var S21=5, S22=9 , S23=14, S24=20;\r\n    var S31=4, S32=11, S33=16, S34=23;\r\n    var S41=6, S42=10, S43=15, S44=21;\r\n    string = Utf8Encode(string);\r\n    x = ConvertToWordArray(string);\r\n    a = 0x67452301; b = 0xEFCDAB89; c = 0x98BADCFE; d = 0x10325476;\r\n    for (k=0;k<x.length;k+=16) {\r\n        AA=a; BB=b; CC=c; DD=d;\r\n        a=FF(a,b,c,d,x[k+0], S11,0xD76AA478);\r\n        d=FF(d,a,b,c,x[k+1], S12,0xE8C7B756);\r\n        c=FF(c,d,a,b,x[k+2], S13,0x242070DB);\r\n        b=FF(b,c,d,a,x[k+3], S14,0xC1BDCEEE);\r\n        a=FF(a,b,c,d,x[k+4], S11,0xF57C0FAF);\r\n        d=FF(d,a,b,c,x[k+5], S12,0x4787C62A);\r\n        c=FF(c,d,a,b,x[k+6], S13,0xA8304613);\r\n        b=FF(b,c,d,a,x[k+7], S14,0xFD469501);\r\n        a=FF(a,b,c,d,x[k+8], S11,0x698098D8);\r\n        d=FF(d,a,b,c,x[k+9], S12,0x8B44F7AF);\r\n        c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);\r\n        b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);\r\n        a=FF(a,b,c,d,x[k+12],S11,0x6B901122);\r\n        d=FF(d,a,b,c,x[k+13],S12,0xFD987193);\r\n        c=FF(c,d,a,b,x[k+14],S13,0xA679438E);\r\n        b=FF(b,c,d,a,x[k+15],S14,0x49B40821);\r\n        a=GG(a,b,c,d,x[k+1], S21,0xF61E2562);\r\n        d=GG(d,a,b,c,x[k+6], S22,0xC040B340);\r\n        c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);\r\n        b=GG(b,c,d,a,x[k+0], S24,0xE9B6C7AA);\r\n        a=GG(a,b,c,d,x[k+5], S21,0xD62F105D);\r\n        d=GG(d,a,b,c,x[k+10],S22,0x2441453);\r\n        c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);\r\n        b=GG(b,c,d,a,x[k+4], S24,0xE7D3FBC8);\r\n        a=GG(a,b,c,d,x[k+9], S21,0x21E1CDE6);\r\n        d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);\r\n        c=GG(c,d,a,b,x[k+3], S23,0xF4D50D87);\r\n        b=GG(b,c,d,a,x[k+8], S24,0x455A14ED);\r\n        a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);\r\n        d=GG(d,a,b,c,x[k+2], S22,0xFCEFA3F8);\r\n        c=GG(c,d,a,b,x[k+7], S23,0x676F02D9);\r\n        b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);\r\n        a=HH(a,b,c,d,x[k+5], S31,0xFFFA3942);\r\n        d=HH(d,a,b,c,x[k+8], S32,0x8771F681);\r\n        c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);\r\n        b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);\r\n        a=HH(a,b,c,d,x[k+1], S31,0xA4BEEA44);\r\n        d=HH(d,a,b,c,x[k+4], S32,0x4BDECFA9);\r\n        c=HH(c,d,a,b,x[k+7], S33,0xF6BB4B60);\r\n        b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);\r\n        a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);\r\n        d=HH(d,a,b,c,x[k+0], S32,0xEAA127FA);\r\n        c=HH(c,d,a,b,x[k+3], S33,0xD4EF3085);\r\n        b=HH(b,c,d,a,x[k+6], S34,0x4881D05);\r\n        a=HH(a,b,c,d,x[k+9], S31,0xD9D4D039);\r\n        d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);\r\n        c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);\r\n        b=HH(b,c,d,a,x[k+2], S34,0xC4AC5665);\r\n        a=II(a,b,c,d,x[k+0], S41,0xF4292244);\r\n        d=II(d,a,b,c,x[k+7], S42,0x432AFF97);\r\n        c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);\r\n        b=II(b,c,d,a,x[k+5], S44,0xFC93A039);\r\n        a=II(a,b,c,d,x[k+12],S41,0x655B59C3);\r\n        d=II(d,a,b,c,x[k+3], S42,0x8F0CCC92);\r\n        c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);\r\n        b=II(b,c,d,a,x[k+1], S44,0x85845DD1);\r\n        a=II(a,b,c,d,x[k+8], S41,0x6FA87E4F);\r\n        d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);\r\n        c=II(c,d,a,b,x[k+6], S43,0xA3014314);\r\n        b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);\r\n        a=II(a,b,c,d,x[k+4], S41,0xF7537E82);\r\n        d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);\r\n        c=II(c,d,a,b,x[k+2], S43,0x2AD7D2BB);\r\n        b=II(b,c,d,a,x[k+9], S44,0xEB86D391);\r\n        a=AddUnsigned(a,AA);\r\n        b=AddUnsigned(b,BB);\r\n        c=AddUnsigned(c,CC);\r\n        d=AddUnsigned(d,DD);\r\n    }\r\n    var temp = WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);\r\n    return temp.toLowerCase();\r\n}\r\n\r\nexport default MD5;","import { message } from \"antd\";\r\nimport { WEB_URL } from \"../Settings\";\r\nimport MD5 from \"./MD5\";\r\n\r\n\r\nfunction getSessionId(): string{\r\n    // return \"9NCcToWtip7blkwuI1VmgPGXFBQnD2v8\"; // TODO: delete later\r\n    let sessionId=\"sessionId=\";\r\n    let cookie:string[]=document.cookie.split(';');\r\n    for(let i=0;i<cookie.length;i++){\r\n        let c=cookie[i].trim();\r\n        if(c.indexOf(\"sessionId\")===0) return c.substring(sessionId.length,c.length);\r\n    }\r\n    return \"\";\r\n}\r\n\r\n//升级至设计师\r\nfunction promptToDesigner(key: string): Promise<boolean> {\r\n    let md5: string = MD5(key);\r\n    let sessionId = getSessionId();\r\n    console.log(md5);\r\n\r\n    let parameter: string = JSON.stringify({ sessionId: sessionId, key: md5 });\r\n\r\n    console.log(parameter);\r\n    let urlbasic = WEB_URL;\r\n    let url: string = urlbasic + \"/api/userinfo\";\r\n\r\n    let result = fetch(url, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: parameter,\r\n    }).then((data) => {\r\n        return data.json();\r\n    }).then((json) => {\r\n        if (json.status === \"key verification failed\") {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      });\r\n    return result;\r\n}\r\n\r\n//得到该用户提交的信息，返回一个字符串化的json\r\nfunction getUserScheme(studentid:string,sort_strategy:string):Promise<string>{\r\n    let sessionId:string=getSessionId();\r\n    let url:string=WEB_URL+\"/api/userScheme\"+\"?\"+\"sessionId=\"+sessionId+\"&student_id=\"+studentid+\"&sort_strategy=\"+sort_strategy;\r\n    let result=fetch(url).then(\r\n        resp=>{\r\n            return resp.json();\r\n        }\r\n    ).catch(()=>{message.error(\"网络开小差啦~\"); return {};});\r\n    return result;\r\n}\r\n\r\n//用户作出操作，返回一个字符串化的json\r\nfunction changeUserScheme(operation:string,recordId:number,color:number[][],recordName:string,descrption:string,author_Id:string,sketch_id:number):Promise<string>{\r\n    let sessionid=getSessionId();\r\n\r\n    let body=JSON.stringify(\r\n        {\r\n            operation:operation,\r\n            sessionId:sessionid,\r\n            id:recordId,\r\n            colors:color,\r\n            name:recordName,\r\n            description:descrption,\r\n            author_id:author_Id,\r\n            sketch_id:sketch_id\r\n        }\r\n    )\r\n    console.log(body);\r\n\r\n    let url=WEB_URL+\"/api/userScheme\"\r\n    let result=fetch(url,{\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": 'application/json'\r\n        },\r\n        body: body\r\n    }).then(\r\n        resp=>{\r\n            return resp.json()\r\n        }\r\n    ).catch(()=>{message.error(\"网络开小差啦~\"); return {};})\r\n    return result;\r\n}\r\n\r\n//浏览信息的获取，返回一个字符串化的json，改成GET\r\nfunction getExploreScheme(sketch_id:number,sort_strategy:string,approved:boolean):Promise<any>{\r\n    let sessionid=getSessionId();\r\n    // let body=JSON.stringify({\r\n    //     sessionId:sessionid,\r\n    //     sketch_id:sketch_id,\r\n    //     sort_strategy:sort_strategy,\r\n    //     approved:approved\r\n    // })\r\n\r\n    let url=WEB_URL+\"/api/exploreScheme\"\r\n    url=url+\"?sessionId=\"+sessionid+\"&sketch_id=\"+sketch_id+\"&sort_strategy=\"+sort_strategy\r\n    if(approved){\r\n        url=url+\"&approved=1\"\r\n    }\r\n    let result=fetch(url).then(\r\n        resp=>{\r\n            return resp.json()\r\n        }\r\n    ).catch(()=>{message.error(\"网络开小差啦~\"); return {};})\r\n    return result\r\n}\r\n\r\n//线稿的列表\r\nfunction getSketch():Promise<string>{\r\n    let url=WEB_URL+\"/api/sketch\"\r\n    let result=fetch(url).then(\r\n        resp=>{\r\n            return resp.json()\r\n        }\r\n    ).catch(()=>{message.error(\"网络开小差啦~\"); return {};})\r\n    return result\r\n}\r\n\r\nconst getRandomName = ():any => {\r\n    let url=WEB_URL+\"/api/randomName\"\r\n    let result=fetch(url).then(\r\n        resp=>{\r\n            return resp.json()\r\n        }\r\n    ).catch(()=>{message.error(\"网络开小差啦~\"); return {\"name\": \"\"};})\r\n    return result\r\n};\r\n\r\nexport { promptToDesigner, getUserScheme, changeUserScheme, getExploreScheme, getSketch, getSessionId, getRandomName };\r\n","import React from \"react\";\r\nimport {Col, message, Row, Switch, Space, Tooltip} from 'antd';\r\nimport  { useState } from 'react';\r\nimport { Modal } from 'antd';\r\nimport '../../styles/Navbar.css';\r\nimport { Input } from 'antd';\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faPencilRuler, faRunning} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getMainPageState } from \"../../store\";\r\n\r\n// TODO: Beautify the navbar\r\n\r\ninterface TopBarProps{\r\n    readonly name:string;\r\n    readonly stateChangeFunction:(refresh: boolean)=>void;\r\n    readonly promptToDesigner:(value:string)=>Promise<boolean>;\r\n    readonly role:string;\r\n}\r\n\r\nfunction LoginOut(){\r\n    window.location.href = \"./logout\";\r\n}\r\n\r\ninterface AppProps{\r\n    readonly role:string;\r\n    readonly submit:(value:string)=>Promise<boolean>\r\n}\r\n\r\nconst App = (props:AppProps) => {\r\n    let role:string=props.role;\r\n    let submit:(value:string)=>Promise<boolean>=props.submit;\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    const [key,setkey]=useState<string>();\r\n\r\n    const showModal = () => {\r\n        if(role===\"Designer\"){\r\n            message.info(\"您已经是设计师了！\");\r\n            return;\r\n        }\r\n        setIsModalVisible(true);\r\n    };\r\n\r\n    const handleOk = () => {\r\n        if(key){\r\n            submit(key).then(result=>{\r\n                if(!result){\r\n                    alert(\"邀请码错误\");\r\n                    return;\r\n                }else{\r\n                    setIsModalVisible(false);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        setIsModalVisible(false);\r\n    };\r\n\r\n    const valueChange=(value:string)=>{\r\n        setkey(value);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Tooltip placement=\"topLeft\" title=\"来成为设计师吧！\" color=\"#2db7f5\" arrowPointAtCenter>\r\n                <FontAwesomeIcon className=\"designer\" icon={ faPencilRuler } size={\"1x\"} onClick={showModal} />\r\n            </Tooltip>\r\n\r\n            <Modal title=\"注册成为设计师\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>\r\n                <p>请输入注册邀请码</p>\r\n                <Input placeholder=\"Basic usage\" id=\"keyText\" value={key} onChange={event=>{valueChange(event.target.value)}}/>\r\n            </Modal>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\n//顶栏\r\nconst TopBar = (props: TopBarProps) => {\r\n\r\n    const mainPageState = useSelector(getMainPageState);\r\n\r\n\r\n\r\n    return(\r\n        <div className=\"navBar\">\r\n            <div className=\"left\">\r\n                <div className=\"welcome\">\r\n                    <span>Welcome to {'\\u00A0'}</span>\r\n                    <div className=\"CodePlay\"> CodePlay {'\\u00A0'}</div>\r\n                    <span> world , {'\\u00A0'}</span>\r\n                    <span>{props.name}</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"right\">\r\n                <Space align=\"center\" size={100}>\r\n                <App role={props.role} submit={props.promptToDesigner} />\r\n                <div className=\"logOut\">\r\n                    <span onClick={LoginOut}>退出登录</span>\r\n                </div>\r\n                </Space>\r\n\r\n\r\n            </div>\r\n        </div>\r\n        // <Row justify=\"space-around\" align={\"middle\"}>\r\n        //     <Col span={10} style={{height:\"73px\"}} >\r\n        //         <div className=\"font\">\r\n        //             <p >Welcome to CodePlay world, {props.name}</p>\r\n        //         </div>\r\n        // <Row justify=\"space-around\" align={\"middle\"}>\r\n        //     <Col span={4} style={{height:\"73px\"}} >\r\n        //         <p >欢迎，{props.name}</p>\r\n        //     </Col>\r\n        //     <Col span={13}>\r\n        //     </Col>\r\n        //     <Col span={2} style={{height:\"73px\"}}>\r\n        //         <Switch  checkedChildren=\"创作\" unCheckedChildren=\"浏览\" checked={mainPageState.page === 'Creator'} onChange={()=>{props.stateChangeFunction(false);}}/>\r\n        //     </Col>\r\n        //     <Col span={1.25}>\r\n        //         <App role={props.role} submit={props.promptToDesigner} />\r\n        //     </Col>\r\n        // </Row>\r\n    );\r\n}\r\n\r\nexport default TopBar;","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getCreatorSketchId, getMainPageState } from \"../../store\";\r\n\r\ninterface ColorSchemePieceProps {\r\n    id: number;\r\n    color_array: Array<Array<number>>;\r\n    explore: (id: number) => void;\r\n\r\n}\r\n\r\nconst ColorSchemePiece = (props: ColorSchemePieceProps) => {\r\n    let color_bind = [];\r\n        for (let i = 0; i < props.color_array.length; i++) {\r\n            let tmp_str = \"rgba(\" + props.color_array[i][0] + \",\" + props.color_array[i][1] + \",\" + props.color_array[i][2] + \",\" + props.color_array[i][3] + \")\";\r\n            color_bind.push(<div className=\"color\" style={{backgroundColor: tmp_str, opacity: props.color_array[i][3], marginBottom: '0.3rem'}}/>);\r\n        }\r\n    return (\r\n        <div className=\"color_bind\" onClick={()=>{props.explore(props.id)}}>\r\n            {color_bind}\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface SidebarProps {\r\n    explore: (id: number) => void;\r\n}\r\n\r\nconst MostLikedList = (props: SidebarProps)=>{\r\n    const mainPageState = useSelector(getMainPageState);\r\n    const currSketchId = useSelector(getCreatorSketchId);\r\n    const currLikedList = mainPageState.schemeList.schemes\r\n                                    .filter((scheme: any) => scheme.sketch_id === currSketchId)\r\n                                    .sort((a: any, b: any) => a.likes > b.likes)\r\n                                    .slice(0, 10)\r\n                                    .map((scheme: any) => {return <ColorSchemePiece id={scheme.id} color_array={scheme.colors} explore={props.explore}></ColorSchemePiece>});\r\n    \r\n    \r\n    return (<div>{currLikedList}</div>);\r\n};\r\n\r\nconst ApprovedList = (props: SidebarProps)=>{\r\n    const mainPageState = useSelector(getMainPageState);\r\n    const currSketchId = useSelector(getCreatorSketchId);\r\n    const approvedList = mainPageState.schemeList.schemes\r\n                                    .filter((scheme: any) => scheme.sketch_id === currSketchId)\r\n                                    .filter((scheme: any) => scheme.approved)\r\n                                    .sort((a: any, b: any) => a.likes > b.likes)\r\n                                    .slice(0, 10)\r\n                                    .map((scheme: any) => {return <ColorSchemePiece id={scheme.id} color_array={scheme.colors} explore={props.explore}></ColorSchemePiece>});\r\n    return (<div>{approvedList}</div>);\r\n};\r\n\r\nexport {MostLikedList, ApprovedList};","\nimport { Button, Layout, message, Row } from \"antd\";\nimport { Content, Footer } from \"antd/lib/layout/layout\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { WEB_URL } from \"../../Settings\";\nimport { getMainPageState, updateColorState, updateCurrColorIndex, updateMainPageState, updatePickerState, updateSketchId } from \"../../store\";\nimport { changeUserScheme, getExploreScheme, getSessionId, getSketch, getUserScheme, promptToDesigner } from \"../../utils/Network\";\nimport Preview from \"../Creator/ColorEditor/WorkSpace/Preview\";\nimport Creator from \"../Creator/Creator\";\nimport Explorer from \"../Explorer/Explorer\";\nimport HistoryList from \"../HistoryList/HistoryList\";\nimport Navbar from \"../Navbar/Navbar\";\nimport \"../../styles/MainPage.css\"\nimport { ApprovedList, MostLikedList } from \"../Sidebar/Sidebar\";\nimport { Typography, Space } from 'antd';\n\nconst { Text, Link } = Typography;\n\n\nvar submittedIn30s = false;\n\nconst MainPage = () => {\n\n    message.config({\n        maxCount: 2,\n    });\n\n    const mainPageState = useSelector(getMainPageState);\n    const dispatch = useDispatch();\n    const [updatePage, setUpdatePage] = useState(0);\n\n    // Operations\n\n    // Click sorting\n    const changeSort = (type: string, approvedOnly=false) : void => {\n        // if(mainPageState.userInfo.role === 'Designer') {\n        const currApprovedOnly = mainPageState.misc.approved;\n        if (approvedOnly) {\n            // Switch\n            getExploreScheme(0,mainPageState.misc.sortStrategy,!currApprovedOnly).then(\n                resp=>{\n                    const newMisc = JSON.parse(JSON.stringify(mainPageState.misc));\n                    newMisc.approved = !currApprovedOnly;\n                    dispatch(updateMainPageState({misc: newMisc, schemeList: resp}));\n                }\n            );\n        } else {\n            getExploreScheme(0,type,currApprovedOnly).then(\n                resp=>{\n                    const newMisc = JSON.parse(JSON.stringify(mainPageState.misc));\n                    newMisc.sortStrategy = type;\n                    dispatch(updateMainPageState({misc: newMisc, schemeList: resp}));\n                }\n            )\n        }\n\n        // } else if (mainPageState.userInfo.role === 'User') {\n        //     getUserScheme(mainPageState.userInfo.student_id, type).then(\n        //         resp=>{\n        //             const newMisc = JSON.parse(JSON.stringify(mainPageState.misc));\n        //             newMisc.sortStrategy = type;\n        //             dispatch(updateMainPageState({misc: newMisc, schemeList: resp}));\n        //         }\n        //     )\n        // }\n    };\n\n\n    // Deletion\n    const deleteRecord = (id: number) => {\n        changeUserScheme(\"delete\",id,[],\"\",\"\",\"\",0).then(\n            resp=>{changeSort(mainPageState.misc.sortStrategy);}\n        )\n    };\n\n    // Approve\n    const approveOperation = (id:number): void => {\n        if( mainPageState.userInfo.role === \"User\" ) return;\n        changeUserScheme(\"approve\",id,[],\"\",\"\",\"\",0).then(\n            resp=>{changeSort(mainPageState.misc.sortStrategy);}\n        )\n    }\n\n    // Disapprove\n    const disapproveOperation = (id:number): void => {\n        if( mainPageState.userInfo.role === \"User\" ) return;\n        changeUserScheme(\"disapprove\",id,[],\"\",\"\",\"\",0).then(\n            resp=>{changeSort(mainPageState.misc.sortStrategy);}\n        )\n    }\n\n    // Submission\n    const submitRecord = (sketch_id:number,name:string,description:string,color_List:number[][]):void => {\n        if(name === '') { message.error(\"请输入配色方案名称!\"); return;}\n        if(submittedIn30s){\n            message.info(\"您的提交过于频繁，请稍后！\");\n        }else{\n            changeUserScheme(\"create\",0,color_List,name,description,mainPageState.userInfo.student_id,sketch_id).then(\n                (resp: any)=>{\n                    if(resp.err === 'similar') {\n                        message.error(\"请不要提交与已有方案类似的方案!\")\n                    } else if (resp.err === 'name duplicated') {\n                        message.error(\"请不要提交重名方案!\")\n                    } else {\n                        message.info(\"提交成功\");\n                        changeSort(mainPageState.misc.sortStrategy);\n                        submittedIn30s = true;\n                        setTimeout(()=>{\n                            submittedIn30s = false;\n                        },30000);\n                    }\n\n                }\n            )\n        }\n    }\n\n    //点击历史记录色条跳转到浏览界面\n    const exploreOperation = (id:number):void => {\n        const schemeList = mainPageState.schemeList.schemes;\n        const filtered = schemeList.filter((scheme: any) => {return scheme.id===id});\n        if (filtered.length === 0) return;\n\n        // 更改 exploreScheme 的信息 然后跳转过去\n        dispatch(updateMainPageState({exploreScheme: filtered[0]}));\n        switchPage(false);\n    }\n\n    \n\n    //刷新随机浏览界面\n    const refreshExplore = () : void => {\n        getExploreScheme(0, 'submission_time', false).then(\n            resp=>{\n                // TODO: 校验正确性\n                // TODO: 使用获得的 scheme 更新全局变量的 exploreScheme 的值\n                const schemeList = resp.schemes;\n                // Generate a random number between [0, schemeList.length)\n                const randomIndex = Math.floor(Math.random() * schemeList.length);\n                const newScheme = schemeList[randomIndex];\n\n                dispatch(updateMainPageState({exploreScheme: newScheme}));\n\n            }\n        )\n    }\n\n\n\n    //切换界面\n    const switchPage = (refresh: boolean) => {\n        if(refresh) {refreshExplore();}\n        dispatch(updateMainPageState({page: mainPageState.page === 'Creator' ? 'Explore' : 'Creator'}));\n    }\n\n    // The first time the page is rendered...\n    useEffect(()=>{\n        console.debug(\"CodePlay Developed & Maintained by c7w & his fellow. https://www.github.com/c7w/\");\n        fetch(WEB_URL + \"/api/userinfo?sessionId=\" + getSessionId(),).then(resp =>resp.json()).then(\n            json=>{\n                \n                if(json.err){ \n                    // TODO: 返回登录界面    \n                    return; \n                }\n                const userInfo = {\n                    loggedIn: true,\n                    student_id: json.student_id,\n                    name: json.name,\n                    fullname: json.fullname,\n                    email: json.email,\n                    role: json.role,\n                };\n                dispatch(updateMainPageState({userInfo}));\n                \n                \n                // Get user schemes\n                // if( json.role === 'Designer' ) {\n                getExploreScheme(0,\"submission_time\",false).then(\n                    resp=>{\n                        dispatch(updateMainPageState({schemeList: resp, exploreScheme: resp.schemes.length > 0 ? resp.schemes[0] : undefined}));\n                });\n                // }\n                // else if (json.role === 'User') {\n                //     getUserScheme(mainPageState.userInfo.student_id,\"submission_time\").then(\n                //         resp=>{\n                //             dispatch(updateMainPageState({schemeList: resp}));\n                //         }\n                //     )\n                // }\n\n                // Get sketch list\n                getSketch().then(resp=>{\n                    dispatch(updateMainPageState({sketchList: resp})); \n                })\n            }\n        ).catch(()=>{message.error(\"网络开小差啦~\"); return {};})\n    }, []);\n\n    useEffect(()=>{\n        setUpdatePage(updatePage+1);\n    }, [mainPageState])\n\n    return (\n        <main>\n            <div className=\"scheme\">\n                <div className=\"selected\">\n                    <span><b>精选方案</b></span>\n                    <ApprovedList explore={exploreOperation}/>\n                 </div>\n            </div>\n\n            <div className=\"scheme2\">\n                <div className=\"popularity\">\n                    <span><b>人气方案</b></span>\n                    <MostLikedList explore={exploreOperation}/>\n                </div>\n            </div>\n\n            <Navbar\n              name={mainPageState.userInfo.name}\n              role={mainPageState.userInfo.role}\n              stateChangeFunction={switchPage}\n              promptToDesigner={promptToDesigner}\n              />\n            <Layout>\n                <Content style={{ margin: \"50px auto\" }}>\n                    <div className=\"Creator\">\n                        <Creator\n                            sketch={JSON.stringify(mainPageState.sketchList)}\n                            onSubmit={submitRecord}\n                        />\n                        <HistoryList\n                            disapprove={disapproveOperation}\n                            sort={changeSort}\n                            getString={JSON.stringify(mainPageState.schemeList)}\n                            show_select={mainPageState.userInfo.role === 'Designer'}\n                            approve={approveOperation}\n                            delete={deleteRecord}\n                            explore={exploreOperation}\n                        />\n                    </div>\n\n                    <div className=\"Explore\">\n                        <Modal\n                            title={mainPageState.exploreScheme.name}\n                            centered\n                            visible={mainPageState.page === 'Explore'}\n                            onCancel={() => {\n                                switchPage(false);\n                            }}\n                            footer={null}\n                        >\n                            <Explorer></Explorer>\n                        </Modal>\n                    </div>\n\n                    {/* <div className=\"Explore\" style={{display: mainPageState.page === 'Explore' ? '' : 'none'}}>\n                        <Row justify={\"space-around\"} align={\"middle\"}>\n                            <Preview raw_str={getExploreRawSvg()} color_arr={mainPageState.exploreScheme.colors}/>\n                        </Row>\n                        <InterActiveInExploration vote={vote} unvote={unvote} liked={mainPageState.exploreScheme.liked} next={next} edit={edit} />\n                    </div> */}\n                </Content>\n            </Layout>\n            <Footer style={{textAlign: 'center' }}>\n                <Text><span style={{fontWeight: 'bold'}}>CodePlay9</span> Developed & Maintained By <Link href=\"https://www.github.com/c7w/\" target=\"_blank\">c7w</Link> & his fellow.</Text> <br/>\n                <Text><span style={{fontWeight: 'bold'}}>© SAST 2021</span> | 京ICP备abcdefgh号-j</Text>\n            </Footer>\n        </main>\n    );\n};\n\n\nexport default MainPage;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.css';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport MainPage from './components/MainPage/MainPage';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <MainPage />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);","/*\r\n    Configuration file.\r\n*/\r\n\r\nconst WEB_URL = \"http://codeplay9.art\";\r\n\r\nexport {WEB_URL};","// HSV => RGB\r\nconst HSV2RGB = (colorValueListBak: Array<number>):Array<number> => {\r\n    // console.log(\"-------------------------in HSV 2 RGB----------------------------\");\r\n    let R: number = colorValueListBak[4]/255, G: number = colorValueListBak[5]/255, B: number = colorValueListBak[6]/255;\r\n    let H: number = colorValueListBak[0], S: number = colorValueListBak[1], V: number = colorValueListBak[2];\r\n    let h: number = Math.floor(H / 60);\r\n    let f: number = H / 60 - h, p = V * (1 - S), q = V * (1 - f * S), t = V * (1 - (1 - f) * S);\r\n    switch (h) {\r\n        case 0:\r\n            R = V; G = t; B = p;\r\n            break;\r\n        case 1:\r\n            R = q; G = V; B = p;\r\n            break;\r\n        case 2:\r\n            R = p; G = V; B = t;\r\n            break;\r\n        case 3:\r\n            R = p; G = q; B = V;\r\n            break;\r\n        case 4:\r\n            R = t; G = p; B = V;\r\n            break;\r\n        case 5:\r\n            R = V; G = p; B = q;\r\n            break;\r\n    }\r\n    // 从 [0, 1] 转换到 [0, 255]\r\n    R *= 255; G *= 255; B *= 255;\r\n    // 更新状态\r\n    colorValueListBak[4] = parseFloat(R.toFixed(0));\r\n    colorValueListBak[5] = parseFloat(G.toFixed(0));\r\n    colorValueListBak[6] = parseFloat(B.toFixed(0));\r\n    // 调试输出\r\n    // for(let i = 0; i <= 6; i++){\r\n    //     console.log(colorValueListBak[i] + \" \");\r\n    // }\r\n    return colorValueListBak;\r\n}\r\n// RGB => HSV\r\nconst RGB2HSV = (colorValueListBak: Array<number>):Array<number> => {\r\n    // console.log(\"-------------------------in RGB 2 HSV----------------------------\");\r\n    let H: number = colorValueListBak[0], S: number, V: number;\r\n    let R: number = colorValueListBak[4]/255, G: number = colorValueListBak[5]/255, B: number = colorValueListBak[6]/255;\r\n    let colorMax = getMax(R, G, B), colorMin = getMin(R, G, B), delta = colorMax - colorMin;\r\n    // 计算 H\r\n    if (delta === 0){\r\n        H = 0;\r\n    }\r\n    else if (colorMax === R && G >= B){\r\n        H = 60 * ((G - B) / delta);\r\n    }\r\n    else if (colorMax === R && G < B){\r\n        H = 60 * ((G - B) / delta) + 360;\r\n    }\r\n    else if (colorMax === G){\r\n        H = 60 * ((B - R) / delta) + 120;\r\n    }\r\n    else if (colorMax === B){\r\n        H = 60 * ((R - G) / delta) + 240;\r\n    }\r\n    // 计算 V\r\n    V = colorMax;\r\n    // 计算 S\r\n    S = (colorMax === 0) ? 0 : (1 - colorMin / colorMax);\r\n    // console.log(\"H: \" + H + \" S: \" + S + \" V: \" + V + \" R: \" + R + \" G: \" + G + \" B: \" + B);\r\n    // 更新状态\r\n    colorValueListBak[0] = parseFloat(H.toFixed(0));\r\n    colorValueListBak[1] = parseFloat(S.toFixed(2));\r\n    colorValueListBak[2] = parseFloat(V.toFixed(2));\r\n    // 调试输出\r\n    // for(let i = 0; i <= 6; i++){\r\n    //     console.log(colorValueListBak[i] + \" \");\r\n    // }\r\n    return colorValueListBak;\r\n}\r\n// 获取三个数的最大值\r\nconst getMax = (a: number, b: number, c: number) => {\r\n    let max = a;\r\n    if(max < b)\r\n        max = b;\r\n    if(max < c)\r\n        max = c;\r\n    return max;\r\n}\r\n// 获取三个数的最小值\r\nconst getMin = (a: number, b: number, c: number) => {\r\n    let min = a;\r\n    if(min > b)\r\n        min = b;\r\n    if(min > c)\r\n        min = c;\r\n    return min;\r\n}\r\n\r\nconst String2ArrayRGB = (colorHexString: string):Array<number> => {\r\n    let R = parseInt(colorHexString.substring(1, 3), 16), G = parseInt(colorHexString.substring(3, 5), 16), B = parseInt(colorHexString.substring(5, 7), 16);\r\n    return [R, G, B];\r\n}\r\n\r\nexport {RGB2HSV, HSV2RGB, String2ArrayRGB};","import React from \"react\";\r\nimport { Tooltip } from \"antd\";\r\n\r\ninterface preview_props {\r\n    readonly raw_str: string; // svg字符串\r\n    readonly color_arr: any; // 二维数组\r\n}\r\n\r\nclass Preview extends React.Component<preview_props, any>{\r\n    render() {\r\n        let color_saved = [];\r\n        color_saved.push(\"\");\r\n        let my_color = this.props.color_arr; // [RGBAHSV]\r\n        let color_num;\r\n\r\n        color_num = my_color.length;\r\n        for (let i = 0; i < color_num; i++){\r\n            let tmp = \"rgba(\" + my_color[i][0] + \",\" + my_color[i][1] + \",\" + my_color[i][2] + \",\" + my_color[i][3] + \")\";\r\n            tmp = \"fill=\" + '\"' + tmp + '\" opacity=' + my_color[i][3];\r\n            color_saved.push(tmp);\r\n        }\r\n\r\n        let s = this.props.raw_str;\r\n        for (let i = 1; i <= color_num; i++) {\r\n            let tmp = \"%%\" + i.toString() + \"%%\";\r\n            s = s.replaceAll(tmp, color_saved[i]);\r\n        }\r\n\r\n        return (\r\n            \r\n            <div className={\"preview_svg\"}>\r\n                <div style={{display: 'flex', justifyContent:'center'}} dangerouslySetInnerHTML={{__html: s}}/>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Preview;"],"sourceRoot":""}